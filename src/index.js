"use strict";
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
Object.defineProperty(exports, "__esModule", { value: true });
const nem_library_1 = require("nem-library");
const privFunctions_1 = require("./privFunctions");
const fs = require('fs');
nem_library_1.NEMLibrary.bootstrap(nem_library_1.NetworkTypes.TEST_NET);
const miWalletPass = new nem_library_1.Password('01PrimerTestWallet');
const rutaWallet = 'C:\\_Curso\\CryptoProjects\\bin';
const nombreWalletFile = 'miWallet.wlt';
let fullFileWalletPath = `${rutaWallet}\\${nombreWalletFile}`;
const timestamp = privFunctions_1.timeStampPretty();
console.log('Cargando el contenido del archivo (en crudo) de la wallet en una variable\n');
const tmpStrMiWallet = fs.readFileSync(`${fullFileWalletPath}`, 'utf8');
const miWallet = nem_library_1.SimpleWallet.readFromWLT(tmpStrMiWallet);
const myAddress = miWallet.address;
console.log('La address o direccion de la cuenta contenida en la wallet es:\n');
console.log(myAddress.pretty());
console.log('A ver si se puede obtener un mosaico transferible...');
const pipi = new nem_library_1.MosaicId('docta_test', 'doctatst');
const caca = new nem_library_1.MosaicHttp();
caca.getMosaicTransferableWithAbsoluteAmount(pipi, 1).subscribe(mmtransferable => {
    console.log(`Algo...: ${mmtransferable.properties.divisibility.toString()}`);
});
const searchMosaic = (address) => {
    return new Promise((resolve, reject) => {
        console.log(`Buscando mosaico en la direccion: ${address.pretty()}`);
        const myAccount = new nem_library_1.AccountHttp();
        myAccount.getMosaicOwnedByAddress(address).subscribe(mosaics => {
            try {
                resolve(mosaics.find((mosaic) => {
                    return mosaic.mosaicId.name === 'doctatst';
                }));
            }
            catch (err) {
                console.log(`${err}`);
                console.log('Please try again');
                reject();
            }
            ;
        });
    });
};
const imprimeMosaico = () => __awaiter(this, void 0, void 0, function* () {
    const pp = yield searchMosaic(myAddress);
    console.log('Hola xyz');
    console.log(`El mosaico encontrado es: ${pp.mosaicId.name}`);
});
imprimeMosaico();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJpbmRleC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBVUEsNkNBRXdGO0FBR3hGLG1EQUFrRDtBQUtsRCxNQUFNLEVBQUUsR0FBRyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUM7QUFHekIsd0JBQVUsQ0FBQyxTQUFTLENBQUMsMEJBQVksQ0FBQyxRQUFRLENBQUMsQ0FBQztBQUc1QyxNQUFNLFlBQVksR0FBRyxJQUFJLHNCQUFRLENBQUMsb0JBQW9CLENBQUMsQ0FBQztBQThDeEQsTUFBTSxVQUFVLEdBQUcsaUNBQWlDLENBQUM7QUFFckQsTUFBTSxnQkFBZ0IsR0FBRyxjQUFjLENBQUM7QUFDeEMsSUFBSSxrQkFBa0IsR0FBRyxHQUFHLFVBQVUsS0FBSyxnQkFBZ0IsRUFBRSxDQUFDO0FBQzlELE1BQU0sU0FBUyxHQUFHLCtCQUFlLEVBQUUsQ0FBQztBQTBHcEMsT0FBTyxDQUFDLEdBQUcsQ0FBQyw2RUFBNkUsQ0FBQyxDQUFDO0FBQzNGLE1BQU0sY0FBYyxHQUFHLEVBQUUsQ0FBQyxZQUFZLENBQUMsR0FBRyxrQkFBa0IsRUFBRSxFQUFFLE1BQU0sQ0FBQyxDQUFDO0FBQ3hFLE1BQU0sUUFBUSxHQUFHLDBCQUFZLENBQUMsV0FBVyxDQUFDLGNBQWMsQ0FBQyxDQUFDO0FBQzFELE1BQU0sU0FBUyxHQUFHLFFBQVEsQ0FBQyxPQUFPLENBQUM7QUFDbkMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxrRUFBa0UsQ0FBQyxDQUFDO0FBQ2hGLE9BQU8sQ0FBQyxHQUFHLENBQUMsU0FBUyxDQUFDLE1BQU0sRUFBRSxDQUFDLENBQUM7QUFzRGhDLE9BQU8sQ0FBQyxHQUFHLENBQUMsc0RBQXNELENBQUMsQ0FBQztBQUNwRSxNQUFNLElBQUksR0FBRyxJQUFJLHNCQUFRLENBQUMsWUFBWSxFQUFFLFVBQVUsQ0FBQyxDQUFDO0FBQ3BELE1BQU0sSUFBSSxHQUFHLElBQUksd0JBQVUsRUFBRSxDQUFDO0FBRzlCLElBQUksQ0FBQyx1Q0FBdUMsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFFLGNBQWMsQ0FBQyxFQUFFO0lBQzlFLE9BQU8sQ0FBQyxHQUFHLENBQUMsWUFBWSxjQUFjLENBQUMsVUFBVSxDQUFDLFlBQVksQ0FBQyxRQUFRLEVBQUUsRUFBRSxDQUFDLENBQUM7QUFDakYsQ0FBQyxDQUFDLENBQUM7QUFhSCxNQUFNLFlBQVksR0FBRyxDQUFDLE9BQWdCLEVBQW1CLEVBQUU7SUFDMUQsT0FBTyxJQUFJLE9BQU8sQ0FBUyxDQUFDLE9BQU8sRUFBRSxNQUFNLEVBQUUsRUFBRTtRQUM5QyxPQUFPLENBQUMsR0FBRyxDQUFDLHFDQUFxQyxPQUFPLENBQUMsTUFBTSxFQUFFLEVBQUUsQ0FBQyxDQUFDO1FBRW5FLE1BQU0sU0FBUyxHQUFHLElBQUkseUJBQVcsRUFBRSxDQUFDO1FBQ3BDLFNBQVMsQ0FBQyx1QkFBdUIsQ0FBQyxPQUFPLENBQUMsQ0FBQyxTQUFTLENBQUMsT0FBTyxDQUFDLEVBQUU7WUFDN0QsSUFBRztnQkFDRCxPQUFPLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLE1BQU0sRUFBRSxFQUFFO29CQUM5QixPQUFPLE1BQU0sQ0FBQyxRQUFRLENBQUMsSUFBSSxLQUFLLFVBQVUsQ0FBQztnQkFDN0MsQ0FBQyxDQUFDLENBQUMsQ0FBQzthQUNMO1lBQUMsT0FBTSxHQUFHLEVBQUU7Z0JBQ1gsT0FBTyxDQUFDLEdBQUcsQ0FBQyxHQUFHLEdBQUcsRUFBRSxDQUFDLENBQUM7Z0JBQ3ZCLE9BQU8sQ0FBQyxHQUFHLENBQUMsa0JBQWtCLENBQUMsQ0FBQztnQkFDaEMsTUFBTSxFQUFFLENBQUM7YUFDVDtZQUFBLENBQUM7UUFDSixDQUFDLENBQUMsQ0FBQztJQUNOLENBQUMsQ0FBQyxDQUFDO0FBQ0osQ0FBQyxDQUFDO0FBR0YsTUFBTSxjQUFjLEdBQUcsR0FBUyxFQUFFO0lBQ2hDLE1BQU0sRUFBRSxHQUFHLE1BQU0sWUFBWSxDQUFDLFNBQVMsQ0FBQyxDQUFDO0lBQ3pDLE9BQU8sQ0FBQyxHQUFHLENBQUMsVUFBVSxDQUFDLENBQUM7SUFDeEIsT0FBTyxDQUFDLEdBQUcsQ0FBQyw2QkFBNkIsRUFBRSxDQUFDLFFBQVEsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDO0FBRS9ELENBQUMsQ0FBQSxDQUFDO0FBSUYsY0FBYyxFQUFFLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxyXG4vLyBQcmltZXIgZWplbXBsby4uLlxyXG4vLyBQcnVlYmEgZGUgZW50b3Juby4gRWwgY2xhc2ljbyBoZWxsbyB3b3JsZC5cclxuXHJcbmNvbnN0IHNNZXNzYWdlID0gJ0hlbGxvIHdvcmxkISEhJ1xyXG5jb25zb2xlLmxvZyhzTWVzc2FnZSlcclxuXHJcbiovXHJcblxyXG4vLyBJbXBvcnRhY2lvbiBkZSBkaWZlcmVudGVzIG9iamV0b3MgZGVzZGUgbGEgTkVNIExpYnJhcnlcclxuaW1wb3J0IHtORU1MaWJyYXJ5LCBOZXR3b3JrVHlwZXMsIFBhc3N3b3JkLCBTaW1wbGVXYWxsZXQsIEFjY291bnRIdHRwLCBBZGRyZXNzLFxyXG4gICAgICAgIE1vc2FpY0h0dHAsIFF1ZXJ5UGFyYW1zLCBUcmFuc2FjdGlvbkh0dHAsIFRpbWVXaW5kb3csIFRyYW5zZmVyVHJhbnNhY3Rpb24sXHJcbiAgICAgICAgUGxhaW5NZXNzYWdlLCBBY2NvdW50LCBNb3NhaWMsIE1vc2FpY1RyYW5zZmVyYWJsZSwgTW9zYWljSWR9IGZyb20gJ25lbS1saWJyYXJ5JztcclxuXHJcbi8vIEltcG9ydGFjaW9uIGRlIG1vZHVsbyBjb24gZnVuY2lvbmVzIHV0aWxlc1xyXG5pbXBvcnQgeyB0aW1lU3RhbXBQcmV0dHkgfSBmcm9tICcuL3ByaXZGdW5jdGlvbnMnO1xyXG5cclxuLy8gRGlzcG9uaWJpbGl6YWNpb24gZGVsIG9iamV0byBmcyAoZmlsZSBzeXN0ZW0pIGVuIGxhIHZhcmlhYmxlIGZzXHJcbi8vIEx1ZWdvIGVzdGEgdmFyaWFibGUgbm9zIHBlcm1pdGlyYSBpbnRlcmFjdHVhciBjb24gZWwgc2lzdGVtYSBkZVxyXG4vLyBhcmNoaXZvcyBkZWwgc2lzdGVtYSBvcGVyYXRpdm9cclxuY29uc3QgZnMgPSByZXF1aXJlKCdmcycpO1xyXG5cclxuLy8gQ29uZmlndXJhY2lvbiBkZSBsYSByZWQgZGUgTkVNIHNvYnJlIGxhIHF1ZSBxdWVyZW1vcyB0cmFiYWphclxyXG5ORU1MaWJyYXJ5LmJvb3RzdHJhcChOZXR3b3JrVHlwZXMuVEVTVF9ORVQpO1xyXG5cclxuLy8gVmFyaWFibGUgcGFyYSByZXNndWFyZGFyIGVsIHBhc3N3b3JkXHJcbmNvbnN0IG1pV2FsbGV0UGFzcyA9IG5ldyBQYXNzd29yZCgnMDFQcmltZXJUZXN0V2FsbGV0Jyk7XHJcbi8vIFRDR09JRVBLU0xUWDZUMkVOTVVZVDQzSDJaSE1FQ0hFNkNQV0RRNk5cclxuLy8gVENHT0lFLVBLU0xUWC02VDJFTk0tVVlUNDNILTJaSE1FQy1IRTZDUFctRFE2TlxyXG5cclxuLypcclxuLy8gU2VndW5kbyBFamVtcGxvLi4uXHJcbi8vIENyZWFjaW9uIGRlIHVuYSB3YWxsZXQuXHJcblxyXG5jb25zdCB0c3RXYWxsZXQgPSBTaW1wbGVXYWxsZXQuY3JlYXRlKCdXYWxsZXQgVGVzdCcsIG1pV2FsbGV0UGFzcyk7XHJcbmNvbnNvbGUubG9nKCdBIGNvbnRpbnVhY2lvbiBsYSBpbmZvcm1hY2lvbiBkZSBsYSB3YWxsZXQgY3JlYWRhOlxcbicpO1xyXG5jb25zb2xlLmxvZyh0c3RXYWxsZXQpO1xyXG5jb25zb2xlLmxvZygnXFxuJyk7XHJcbiovXHJcblxyXG4vKlxyXG4vLyBUZXJjZXIgRWplbXBsb1xyXG4vLyBDb25zdWx0YSBsYXMgdHJhbnNhY2Npb25lcyBkZSB1bmEgY3VlbnRhLlxyXG4vLyBPam8gY29uIGVsIGNvbXBvcnRhbWllbnRvIGFzaW5jcm9uby4gVmVyIHF1ZSBzdWNlZGUgZW50cmUgbGEgaW1wcmVzaW9uIGRlIGxhcyB0cmFuc2FjY2lvbmVzIHkgZWwgbWVuc2FqZSBkZSBmaW4geSBzYWxpZGFcclxuXHJcbmNvbnN0IG15QWRkcmVzcyA9IG5ldyBBZGRyZXNzKCdUQklVUU1PR0hVSDdHTjVMTTYyQ1E1Q0k0SkVYTVdVNDU1SVBISVlaJyk7XHJcblxyXG5jb25zb2xlLmxvZygnPT0+PlJlYWxpemFuZG8gdW5hIGNvbnN1bHRhIGEgbGEgVEVTVE5FVC4uLlxcbicpXHJcbmNvbnN0IGFjY291bnRIdHRwID0gbmV3IEFjY291bnRIdHRwKCk7XHJcblxyXG5hY2NvdW50SHR0cC5hbGxUcmFuc2FjdGlvbnMobXlBZGRyZXNzKVxyXG4uc3Vic2NyaWJlKGFsbFRyYW5zYWN0aW9ucyA9PiB7XHJcblx0Y29uc29sZS5sb2coYWxsVHJhbnNhY3Rpb25zKTtcclxufSk7XHJcblxyXG5jb25zb2xlLmxvZygnXFxuPT0+PlRlcm1pbmFuZG8geSBzYWxpZW5kby4uLlxcbicpXHJcblxyXG5cclxuLy8gT3RybyBlamVtcGxvLlxyXG4vLyBDb25zdWx0YW5kbyB0b2RvcyBsb3MgbW9zYWljb3MgZGVudHJvIGRlIHVuIE5hbWVTcGFjZSBkYWRvLCBlbiBlc3RlIGNhc28gXCJkb2N0YVwiXHJcbmNvbnNvbGUubG9nKCc9PT4+UmVhbGl6YW5kbyB1bmEgY29uc3VsdGEgc29icmUgbW9zYWljb3MuLi5cXG4nKVxyXG5jb25zdCBtb3NhaWNIdHRwID0gbmV3IE1vc2FpY0h0dHAoKTtcclxuY29uc3QgbmFtZVNwYWNlPSdkb2N0YV90ZXN0JztcclxuXHJcbm1vc2FpY0h0dHAuZ2V0QWxsTW9zYWljc0dpdmVuTmFtZXNwYWNlKG5hbWVTcGFjZSkuc3Vic2NyaWJlKG1vc2FpY0RlZmluaXRpb25zID0+IHtcclxuXHRjb25zb2xlLmxvZyhtb3NhaWNEZWZpbml0aW9ucyk7XHJcbn0pO1xyXG5cclxuY29uc29sZS5sb2coJ1xcbj09Pj5UZXJtaW5hbmRvIHkgc2FsaWVuZG8uLi5cXG4nKVxyXG4qL1xyXG5cclxuLy8gVmFyaWFibGUgZG9uZGUgc2UgYWxtYWNlbmEgbGEgcnV0YSBkb25kZSBzZSB2YSBhIGVzY3JpYmlyIGVsIGFyY2hpdm8gZGUgbGEgd2FsbGV0IGNyZWFkYS5cclxuY29uc3QgcnV0YVdhbGxldCA9ICdDOlxcXFxfQ3Vyc29cXFxcQ3J5cHRvUHJvamVjdHNcXFxcYmluJztcclxuLy8gVmFyaWFibGUgcXVlIHJlZ2lzdHJhIGVsIG5vbWJyZSBkZWwgYXJjaGl2byBkZSBsYSB3YWxsZXQgYSBndWFyZGFyXHJcbmNvbnN0IG5vbWJyZVdhbGxldEZpbGUgPSAnbWlXYWxsZXQud2x0JztcclxubGV0IGZ1bGxGaWxlV2FsbGV0UGF0aCA9IGAke3J1dGFXYWxsZXR9XFxcXCR7bm9tYnJlV2FsbGV0RmlsZX1gO1xyXG5jb25zdCB0aW1lc3RhbXAgPSB0aW1lU3RhbXBQcmV0dHkoKTtcclxuXHJcbi8qXHJcbi8vIEN1YXJ0byBFamVtcGxvXHJcbi8vIFNhbHZhciBlbiBkaXNjbyB1bmEgd2FsbGV0XHJcblxyXG5jb25zb2xlLmxvZygnPT0+PlNhbHZhbmRvIGxhIHdhbGxldC4uLlxcbicpXHJcblxyXG4vL1NlIHZlcmlmaWNhIHNpIHlhIGV4aXN0ZSB1bmEgd2FsbGV0XHJcbmlmIChmcy5leGlzdHNTeW5jKGZ1bGxGaWxlV2FsbGV0UGF0aCkpe1xyXG5cdC8vIFNlIGV4aXN0ZSB1biBhcmNoaXZvIGRlIHdhbGxldCwgc2UgY2FtYmlhIGVsIG5vbWJyZSB1c2FuZG8gdW4gdGltZXN0YW1wXHJcblx0ZnVsbEZpbGVXYWxsZXRQYXRoID0gYCR7cnV0YVdhbGxldH1cXFxcJHt0aW1lc3RhbXB9XyR7bm9tYnJlV2FsbGV0RmlsZX1gO1xyXG59O1xyXG5cclxuLy8gU2UgcGFzYSBsYSB3YWxsZXQgZGUgTkVNIGEgdW4gc3RyaW5nIHVlIGx1ZWdvIHB1ZWRlIHNlciBcImJhamFkb1wiIGEgZGlzY29cclxuY29uc3Qgd2FsbGV0U3RyaW5nID0gdHN0V2FsbGV0LndyaXRlV0xURmlsZSgpO1xyXG5cclxuLy8gTGEgc2lndWllbnRlIGxpbmVhIGVzIGxhIHF1ZSBcImJhamEgYSBkaXNjb1wiIGVsIFwic3RyaW5nXCIgZGUgbGEgd2FsbGV0IGRlIE5FTSBjcmVhZGFcclxuZnMud3JpdGVGaWxlU3luYyhmdWxsRmlsZVdhbGxldFBhdGgsIHdhbGxldFN0cmluZyk7XHJcbmNvbnNvbGUubG9nKGBcXG49PT4+TGEgd2FsbGV0IHNlIGd1YXJkbyBleGl0b3NhbWVudGUgZW46ICR7ZnVsbEZpbGVXYWxsZXRQYXRofVxcbmApO1xyXG5cclxuLy8gLy8gRXNjcmliaWVuZG8gZWwgYXJjaGl2byBkZSBsYSB3YWxsZXQsIHBlcm8gZXN0YSB2ZXogZGUgZm9ybWEgYXNpbmNyb25hLlxyXG4vLyBmcy53cml0ZUZpbGUoYCR7ZnVsbEZpbGVXYWxsZXRQYXRofWAsIHdhbGxldFN0cmluZywgKGVycikgPT4ge1xyXG4vLyAgICAgLy8gU2kgbGEgZXNjcml0dXJhIGRlIGxhIHdhbGxldCBkYSBlcnJvciwgc2UgY2FwdHVyYSBlbCBlcnJvclxyXG4vLyAgICAgaWYgKGVycikgdGhyb3cgZXJyO1xyXG4vL1xyXG4vLyAgICAgLy8gc2kgdmEgdG9kbyBiaWVuLCBzZSBkYSB1biBtZW5zYWplIGRlIGV4aXRvXHJcbi8vICAgICBjb25zb2xlLmxvZyhgXFxuPT0+PkxhIHdhbGxldCBzZSBndWFyZG8gZXhpdG9zYW1lbnRlIGVuOiAke3J1dGFXYWxsZXR9JHtub21icmVXYWxsZXRGaWxlfVxcbmApXHJcbi8vIH0pO1xyXG4qL1xyXG5cclxuLypcclxuLy8gUXVpbnRvIEVqZW1wbG9cclxuLy8gTGV5ZW5kbyB1bmEgd2FsbGV0IGRlc2RlIGVsIGRpc2NvXHJcblxyXG5cclxuLy8gTGV5ZW5kbyBlbCBhcmNoaXZvIGRlIGxhIHdhbGxldC4uLlxyXG5jb25zb2xlLmxvZygnQ2FyZ2FuZG8gZWwgY29udGVuaWRvIGRlbCBhcmNoaXZvIChlbiBjcnVkbykgZGUgbGEgd2FsbGV0IGVuIHVuYSB2YXJpYWJsZVxcbicpO1xyXG5jb25zdCB0bXBTdHJNaVdhbGxldCA9IGZzLnJlYWRGaWxlU3luYyhgJHtmdWxsRmlsZVdhbGxldFBhdGh9YCwgJ3V0ZjgnKTtcclxuY29uc29sZS5sb2coJ1xcbkVsIGFyY2hpdm8gXCJwdXJvXCIgZGUgbGEgd2FsbGV0IGNvbnRpZW5lOlxcbicpO1xyXG5jb25zb2xlLmxvZyh0bXBTdHJNaVdhbGxldCk7XHJcbmNvbnNvbGUubG9nKCdcXG4nKTtcclxuXHJcblxyXG4vLyBTaSBsYSB3YWxsZXQgYSBsZWVyIGZ1ZSBjcmVhZGEgZGUgbWFuZXJhIHNlbmNpbGxhLCBlcyBkZWNpciwgc2luIHVzYXIgbGEgXCJOYW5vIFdhbGxldFwiLlxyXG5jb25zdCBtaVdhbGxldCA9IFNpbXBsZVdhbGxldC5yZWFkRnJvbVdMVCh0bXBTdHJNaVdhbGxldCk7XHJcblxyXG4vLyBTaSBsYSB3YWxsZXQgYSBsZWVyIGZ1ZSBjcmVhZGEgY29uIGxhIFwiTmFubyBXYWxsbGV0XCJcclxuLy9jb25zdCBtaVdhbGxldCA9IFNpbXBsZVdhbGxldC5yZWFkRnJvbU5hbm9XYWxsZXRXTEYodG1wU3RyTWlXYWxsZXQpO1xyXG5cclxuY29uc29sZS5sb2coJ1xcbkVsIGNvbnRlbmlkbyBkZSBsYSB3YWxsZXQgc2VndW4gTkVNIGVzOlxcbicpO1xyXG5jb25zb2xlLmxvZyhtaVdhbGxldCk7XHJcbmNvbnNvbGUubG9nKCdcXG4nKTtcclxuXHJcbmNvbnNvbGUubG9nKCdcXG5BYnJpZW5kbyBsYSB3YWxsZXQgcGFyYSB2ZXIgbGEgaW5mb3JtYWNpb24gZGV0YWxsYWRhIGRlIGxhIG1pc21hOlxcbicpO1xyXG5jb25zdCBtaUN1ZW50YSA9IG1pV2FsbGV0Lm9wZW4obWlXYWxsZXRQYXNzKTtcclxuY29uc29sZS5sb2coJ1xcbkxhIGluZm9ybWFjaW9uIGRlIGxhIGN1ZW50YSBjb250ZW5pZGEgZW4gbGEgd2FsbGV0IGVzOlxcbicpO1xyXG5jb25zb2xlLmxvZyhtaUN1ZW50YSk7XHJcbmNvbnNvbGUubG9nKCdcXG4nKTtcclxuXHJcblxyXG4vLyBFeHRyYWUgbGEgYWRkcmVzcyBvIGRpcmVjY2lvbiBkZSBsYSB3YWxsZXQuXHJcbi8vIExhIGFkZHJlc3Mgc2UgcHVlZGUgZXh0cmFlciBkZSBsYSBtaXNtYSB3YWxsZXQgbyBkZSBsYSBjdWVudGFcclxuY29uc3QgbXlBZGRyZXNzID0gbWlXYWxsZXQuYWRkcmVzcztcclxuY29uc29sZS5sb2coJ0xhIGFkZHJlc3MgbyBkaXJlY2Npb24gZGUgbGEgY3VlbnRhIGNvbnRlbmlkYSBlbiBsYSB3YWxsZXQgZXM6XFxuJyk7XHJcbmNvbnNvbGUubG9nKG15QWRkcmVzcy5wcmV0dHkoKSk7XHJcbmNvbnNvbGUubG9nKCdcXG4nKTtcclxuKi9cclxuXHJcbi8qXHJcbi8vIFNleHRvIEVqZW1wbG9cclxuLy8gRW52aWFyIFhFTVxyXG5cclxuLy8gQ3JlYSB1bmEgdHJhc25zYWNjaW9uXHJcbmNvbnN0IHRyYW5zYWN0aW9uSHR0cCA9IG5ldyBUcmFuc2FjdGlvbkh0dHAoKTtcclxuXHJcbi8vIFNlIGd1YXJkYSBlbiB1bmEgdmFyaWFibGUgdGVtcG9yYWwgbGEgY2xhdmUgcHJpdmFkYSBkZSBxdWllbiBlbnZpYVxyXG4vLyBMbyBpbnRlcmVzYW50ZSBzZXJpYSBhYnJpciBsYSB3YWxsZXQsIHNhY2FyIGxhIGRhdGEgeSBjb24gZXN0YSBkYXRhIGZpcm1hciBsYSB0cmFuc2FjY2lvbi5cclxuLy9jb25zdCBwcml2YXRlS2V5OiBzdHJpbmcgPSBwcm9jZXNzLmVudi5QUklWQVRFX0tFWTtcclxuY29uc3QgcHJpdmF0ZUtleTogc3RyaW5nID0gXCJjNGM0MDUwNGZkZWQwMjg4NDU1YjJkYmIwMmFkNDdmZmJhMGRiYWIzMWE4ODIyNTEzOTFhNDU0OTA1ODU3YjljXCI7XHJcblxyXG4vLyBDcmVhIHVuYSBjdWVudGEgY29uIGxhIGNsYXZlIHByaXZhZGEuXHJcbmNvbnN0IGFjY291bnQgPSBBY2NvdW50LmNyZWF0ZVdpdGhQcml2YXRlS2V5KHByaXZhdGVLZXkpO1xyXG5cclxuLy9jb25zdCB0cmFuc2ZlclRyYW5zYWN0aW9uID0gVHJhbnNmZXJUcmFuc2FjdGlvbi5jcmVhdGUoXHJcbi8vICAgIFRpbWVXaW5kb3cuY3JlYXRlV2l0aERlYWRsaW5lKCksXHJcbi8vICAgIG5ldyBBZGRyZXNzKFwiVEFTRUJSLUUzT1lLWi1EQzVYS0EtUUxBSVhYLUlMTExIQi1RUk5TRlItTVNKUFwiKSxcclxuLy8gICAgbmV3IFhFTSgwKSxcclxuLy8gICAgUGxhaW5NZXNzYWdlLmNyZWF0ZShcIkEgdmVyIHNpIGxsZWdhIGVsIG1lbnNhamUuLi5cIilcclxuLy8pO1xyXG5cclxuLy8gQ3JlYSB1bmEgdHJhbnNhY2Npb24geSBsYSBlbnZpYS4uLlxyXG5jb25zdCB0cmFuc2ZlclRyYW5zYWN0aW9uID0gVHJhbnNmZXJUcmFuc2FjdGlvbi5jcmVhdGUoXHJcbiAgICBUaW1lV2luZG93LmNyZWF0ZVdpdGhEZWFkbGluZSgpLFxyXG4gICAgbmV3IEFkZHJlc3MoXCJUQVNFQlJFM09ZS1pEQzVYS0FRTEFJWFhJTExMSEJRUk5TRlJNU0pQXCIpLFxyXG4gICAgbmV3IFhFTSgxKSxcclxuICAgIFBsYWluTWVzc2FnZS5jcmVhdGUoXCJQcm9ncmFtYW5kbyBjb24gTkVNIEJsb2NrY2hhaW4gZW4gU2FudGlhZ28hISFcIilcclxuKTtcclxuXHJcbmNvbnN0IHNpZ25lZFRyYW5zYWN0aW9uID0gYWNjb3VudC5zaWduVHJhbnNhY3Rpb24odHJhbnNmZXJUcmFuc2FjdGlvbik7XHJcblxyXG5jb25zb2xlLmxvZyhzaWduZWRUcmFuc2FjdGlvbik7XHJcblxyXG50cmFuc2FjdGlvbkh0dHAuYW5ub3VuY2VUcmFuc2FjdGlvbihzaWduZWRUcmFuc2FjdGlvbikuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xyXG4qL1xyXG4vLyBMZXllbmRvIGVsIGFyY2hpdm8gZGUgbGEgd2FsbGV0Li4uXHJcbmNvbnNvbGUubG9nKCdDYXJnYW5kbyBlbCBjb250ZW5pZG8gZGVsIGFyY2hpdm8gKGVuIGNydWRvKSBkZSBsYSB3YWxsZXQgZW4gdW5hIHZhcmlhYmxlXFxuJyk7XHJcbmNvbnN0IHRtcFN0ck1pV2FsbGV0ID0gZnMucmVhZEZpbGVTeW5jKGAke2Z1bGxGaWxlV2FsbGV0UGF0aH1gLCAndXRmOCcpO1xyXG5jb25zdCBtaVdhbGxldCA9IFNpbXBsZVdhbGxldC5yZWFkRnJvbVdMVCh0bXBTdHJNaVdhbGxldCk7XHJcbmNvbnN0IG15QWRkcmVzcyA9IG1pV2FsbGV0LmFkZHJlc3M7XHJcbmNvbnNvbGUubG9nKCdMYSBhZGRyZXNzIG8gZGlyZWNjaW9uIGRlIGxhIGN1ZW50YSBjb250ZW5pZGEgZW4gbGEgd2FsbGV0IGVzOlxcbicpO1xyXG5jb25zb2xlLmxvZyhteUFkZHJlc3MucHJldHR5KCkpO1xyXG5cclxuLypcclxuLy8gU2VwdGltbyBFamVtcGxvXHJcbi8vIFJldmlzYXIgYmFsYW5jZXNcclxuXHJcblxyXG4vLyBSZXZpc2FyIGJhbGFuY2UgZGUgWEVNXHJcbi8vIFJldmlzYXIgYmxhbmNlcyBkZSBNT1NBSUNzXHJcblxyXG5jb25zdCBteUFjY291bnQgPSBuZXcgQWNjb3VudEh0dHAoKTtcclxubXlBY2NvdW50LmdldE1vc2FpY093bmVkQnlBZGRyZXNzKG15QWRkcmVzcykuc3Vic2NyaWJlKG1vc2FpY3MgPT4ge1xyXG4gIGNvbnN0IHhlbU1vc2FpYyA9IG1vc2FpY3MuZmluZCgobW9zYWljKSA9PiB7XHJcblx0XHRyZXR1cm4gbW9zYWljLm1vc2FpY0lkLm5hbWUgPT09ICd4ZW0nO1xyXG5cdH0pO1xyXG5cdGlmICgheGVtTW9zYWljKSB7XHJcbiAgICBjb25zb2xlLmxvZygnTGEgY2FudGlkYWQgWEVNIGVzOiAwJyk7XHJcbiAgfSBlbHNlIHtcclxuXHQgICBjb25zb2xlLmxvZyhgTGEgY2FudGlkYWQgWEVNIGVzOiAke3hlbU1vc2FpYy5xdWFudGl0eSAvIDFlNn1gKTtcclxuICB9O1xyXG5cclxuICBjb25zdCBkb2N0YU1vc2FpYyA9IG1vc2FpY3MuZmluZCgobW9zYWljKSA9PiB7XHJcbiAgICByZXR1cm4gbW9zYWljLm1vc2FpY0lkLm5hbWUgPT09ICdkb2N0YXRzdCc7XHJcbiAgfSk7XHJcbiAgaWYgKCFkb2N0YU1vc2FpYykge1xyXG4gICAgY29uc29sZS5sb2coJ0xhIGNhbnRpZGFkIGRvY3RhdHN0IGVzOiAwJyk7XHJcbiAgfSBlbHNlIHtcclxuICAgICBjb25zb2xlLmxvZyhgTGEgY2FudGlkYWQgZG9jdGF0c3QgZXM6ICR7ZG9jdGFNb3NhaWMucXVhbnRpdHkgLyAxZTZ9YCk7XHJcbiAgfTtcclxufSk7XHJcblxyXG4vLy8vIExhIGNhbnRpZGFkIFhFTSBlczogMTAxLjI1XHJcbi8vLy8gTGEgY2FudGlkYWQgZG9jdGF0c3QgZXM6IDEyMzQ1NjdcclxuKi9cclxuXHJcbi8qXHJcbi8vIE9jdGF2byBFamVtcGxvXHJcbi8vIEhhY2VyIHRyYW5zYWNjaW9uZXNcclxuKi9cclxuXHJcbi8vIERldiBBY2NvdW50XHJcbi8vIEFjY291bnQge1xyXG4vLyAgIGFkZHJlc3M6IEFkZHJlc3Mge1xyXG4vLyAgICAgdmFsdWU6ICdUQ0dPSUVQS1NMVFg2VDJFTk1VWVQ0M0gyWkhNRUNIRTZDUFdEUTZOJyxcclxuLy8gICAgIG5ldHdvcmtUeXBlOiAxNTJcclxuLy8gICB9LFxyXG4vLyAgIHB1YmxpY0tleTogJzk1MGM4Yzk5MzA5ZDYyNDgxZDI3ZWU2NzM2MTJkMmY5YzY2OTZiNTk2MjEzODRmYTdmNDYxZjE3NmZmZmI1OWQnLFxyXG4vLyAgIHByaXZhdGVLZXk6ICdjNGM0MDUwNGZkZWQwMjg4NDU1YjJkYmIwMmFkNDdmZmJhMGRiYWIzMWE4ODIyNTEzOTFhNDU0OTA1ODU3YjljJ1xyXG4vLyB9XHJcbi8vXHJcbi8vIFRBU0VCUkUzT1lLWkRDNVhLQVFMQUlYWElMTExIQlFSTlNGUk1TSlAgPT0+PiBFc3RhIGVzIG1pIG5hbm93YWxsZXQgRG9jdGFcclxuLy9cclxuXHJcblxyXG5jb25zb2xlLmxvZygnQSB2ZXIgc2kgc2UgcHVlZGUgb2J0ZW5lciB1biBtb3NhaWNvIHRyYW5zZmVyaWJsZS4uLicpO1xyXG5jb25zdCBwaXBpID0gbmV3IE1vc2FpY0lkKCdkb2N0YV90ZXN0JywgJ2RvY3RhdHN0Jyk7XHJcbmNvbnN0IGNhY2EgPSBuZXcgTW9zYWljSHR0cCgpO1xyXG5cclxuLy8gQnVzY28gdW4gbW9zYWljbyB5IGxvIGRldnVlbHZvIGVuIG1vZG8gdHJhbnNmZXJhYmxlIHBhcmEgcG9kZXIgbHVlZ28gYWRqdW50YXJsbyBlbiB1bmEgdHJhbnNhY2Npb25cclxuY2FjYS5nZXRNb3NhaWNUcmFuc2ZlcmFibGVXaXRoQWJzb2x1dGVBbW91bnQocGlwaSwgMSkuc3Vic2NyaWJlKCBtbXRyYW5zZmVyYWJsZSA9PiAge1xyXG4gICAgY29uc29sZS5sb2coYEFsZ28uLi46ICR7bW10cmFuc2ZlcmFibGUucHJvcGVydGllcy5kaXZpc2liaWxpdHkudG9TdHJpbmcoKX1gKTtcclxufSk7XHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuLy8gRnVuY2lvbiBwYXJhIGJ1c2NhciB1biBtb3NhaWNvIGVuIHVuYSB3YWxsZXQuXHJcbmNvbnN0IHNlYXJjaE1vc2FpYyA9IChhZGRyZXNzOiBBZGRyZXNzKTogUHJvbWlzZTxNb3NhaWM+ID0+IHtcclxuXHRyZXR1cm4gbmV3IFByb21pc2U8TW9zYWljPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcblx0XHRjb25zb2xlLmxvZyhgQnVzY2FuZG8gbW9zYWljbyBlbiBsYSBkaXJlY2Npb246ICR7YWRkcmVzcy5wcmV0dHkoKX1gKTtcclxuXHJcbiAgICBjb25zdCBteUFjY291bnQgPSBuZXcgQWNjb3VudEh0dHAoKTtcclxuICAgIG15QWNjb3VudC5nZXRNb3NhaWNPd25lZEJ5QWRkcmVzcyhhZGRyZXNzKS5zdWJzY3JpYmUobW9zYWljcyA9PiB7XHJcbiAgICAgIHRyeXtcclxuICAgICAgICByZXNvbHZlKG1vc2FpY3MuZmluZCgobW9zYWljKSA9PiB7XHJcbiAgICAgICAgICByZXR1cm4gbW9zYWljLm1vc2FpY0lkLm5hbWUgPT09ICdkb2N0YXRzdCc7XHJcbiAgICAgICAgfSkpO1xyXG4gICAgICB9IGNhdGNoKGVycikge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGAke2Vycn1gKTtcclxuICAgIFx0XHRcdGNvbnNvbGUubG9nKCdQbGVhc2UgdHJ5IGFnYWluJyk7XHJcbiAgICBcdFx0XHRyZWplY3QoKTtcclxuICAgICAgfTtcclxuICAgIH0pO1xyXG5cdH0pO1xyXG59O1xyXG5cclxuLy8gRnVuY2lvbiBwYXJhIGltcHJpbWlyIGxhIGluZm9ybWFjaW9uIGRlIHVuIG1vc2FpY28uXHJcbmNvbnN0IGltcHJpbWVNb3NhaWNvID0gYXN5bmMgKCkgPT4ge1xyXG4gIGNvbnN0IHBwID0gYXdhaXQgc2VhcmNoTW9zYWljKG15QWRkcmVzcyk7XHJcbiAgY29uc29sZS5sb2coJ0hvbGEgeHl6Jyk7XHJcbiAgY29uc29sZS5sb2coYEVsIG1vc2FpY28gZW5jb250cmFkbyBlczogJHtwcC5tb3NhaWNJZC5uYW1lfWApO1xyXG5cclxufTtcclxuXHJcbi8vY29uc3Qgc2VsZWN0ZWRNb3NhaWMgPSBuZXcgTW9zYWljVHJhbnNmZXJhYmxlKCk7XHJcblxyXG5pbXByaW1lTW9zYWljbygpO1xyXG5cclxuXHJcbi8vIFByb2JhciBORU1QYXkgYmFqYXJsYVxyXG5cclxuLy8gUmV2aXNhciBjb21vIGhhY2UgbGEgdHJhbnNhY2Npb24gZW4gaHR0cHM6Ly9naXRodWIuY29tL2RnYXJjaWEzNjAvTkVNUGF5L2Jsb2IvbWFzdGVyL3NyYy9wYWdlcy90cmFuc2Zlci90cmFuc2Zlci50c1xyXG4iXX0=