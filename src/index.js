"use strict";
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
Object.defineProperty(exports, "__esModule", { value: true });
const nem_library_1 = require("nem-library");
const privFunctions_1 = require("./privFunctions");
const fs = require('fs');
nem_library_1.NEMLibrary.bootstrap(nem_library_1.NetworkTypes.TEST_NET);
const miWalletPass = new nem_library_1.Password('01PrimerTestWallet');
const rutaWallet = 'C:\\_Curso\\CryptoProjects\\bin';
const nombreWalletFile = 'miWallet.wlt';
let fullFileWalletPath = `${rutaWallet}\\${nombreWalletFile}`;
const timestamp = privFunctions_1.timeStampPretty();
console.log('Cargando el contenido del archivo (en crudo) de la wallet en una variable\n');
const tmpStrMiWallet = fs.readFileSync(`${fullFileWalletPath}`, 'utf8');
const miWallet = nem_library_1.SimpleWallet.readFromWLT(tmpStrMiWallet);
const myAddress = miWallet.address;
console.log('La address o direccion de la cuenta contenida en la wallet es:\n');
console.log(myAddress.pretty());
const searchMosaic = (address) => {
    return new Promise((resolve, reject) => {
        console.log(`Buscando mosaico en la direccion: ${address.pretty()}`);
        const myAccount = new nem_library_1.AccountHttp();
        myAccount.getMosaicOwnedByAddress(address).subscribe(mosaics => {
            try {
                resolve(mosaics.find((mosaic) => {
                    return mosaic.mosaicId.name === 'doctatst';
                }));
            }
            catch (err) {
                console.log(`${err}`);
                console.log('Please try again');
                reject();
            }
            ;
        });
    });
};
const imprimeMosaico = () => __awaiter(this, void 0, void 0, function* () {
    const pp = yield searchMosaic(myAddress);
    console.log('Hola xyz');
    console.log(`El mosaico encontrado es: ${pp.mosaicId.name}`);
});
imprimeMosaico();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJpbmRleC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBVUEsNkNBRThFO0FBRzlFLG1EQUFrRDtBQUtsRCxNQUFNLEVBQUUsR0FBRyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUM7QUFHekIsd0JBQVUsQ0FBQyxTQUFTLENBQUMsMEJBQVksQ0FBQyxRQUFRLENBQUMsQ0FBQztBQUc1QyxNQUFNLFlBQVksR0FBRyxJQUFJLHNCQUFRLENBQUMsb0JBQW9CLENBQUMsQ0FBQztBQThDeEQsTUFBTSxVQUFVLEdBQUcsaUNBQWlDLENBQUM7QUFFckQsTUFBTSxnQkFBZ0IsR0FBRyxjQUFjLENBQUM7QUFDeEMsSUFBSSxrQkFBa0IsR0FBRyxHQUFHLFVBQVUsS0FBSyxnQkFBZ0IsRUFBRSxDQUFDO0FBQzlELE1BQU0sU0FBUyxHQUFHLCtCQUFlLEVBQUUsQ0FBQztBQTBKcEMsT0FBTyxDQUFDLEdBQUcsQ0FBQyw2RUFBNkUsQ0FBQyxDQUFDO0FBQzNGLE1BQU0sY0FBYyxHQUFHLEVBQUUsQ0FBQyxZQUFZLENBQUMsR0FBRyxrQkFBa0IsRUFBRSxFQUFFLE1BQU0sQ0FBQyxDQUFDO0FBQ3hFLE1BQU0sUUFBUSxHQUFHLDBCQUFZLENBQUMsV0FBVyxDQUFDLGNBQWMsQ0FBQyxDQUFDO0FBQzFELE1BQU0sU0FBUyxHQUFHLFFBQVEsQ0FBQyxPQUFPLENBQUM7QUFDbkMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxrRUFBa0UsQ0FBQyxDQUFDO0FBQ2hGLE9BQU8sQ0FBQyxHQUFHLENBQUMsU0FBUyxDQUFDLE1BQU0sRUFBRSxDQUFDLENBQUM7QUFHaEMsTUFBTSxZQUFZLEdBQUcsQ0FBQyxPQUFnQixFQUFtQixFQUFFO0lBQzFELE9BQU8sSUFBSSxPQUFPLENBQVMsQ0FBQyxPQUFPLEVBQUUsTUFBTSxFQUFFLEVBQUU7UUFDOUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxxQ0FBcUMsT0FBTyxDQUFDLE1BQU0sRUFBRSxFQUFFLENBQUMsQ0FBQztRQUVuRSxNQUFNLFNBQVMsR0FBRyxJQUFJLHlCQUFXLEVBQUUsQ0FBQztRQUNwQyxTQUFTLENBQUMsdUJBQXVCLENBQUMsT0FBTyxDQUFDLENBQUMsU0FBUyxDQUFDLE9BQU8sQ0FBQyxFQUFFO1lBQzdELElBQUc7Z0JBQ0QsT0FBTyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxNQUFNLEVBQUUsRUFBRTtvQkFDOUIsT0FBTyxNQUFNLENBQUMsUUFBUSxDQUFDLElBQUksS0FBSyxVQUFVLENBQUM7Z0JBQzdDLENBQUMsQ0FBQyxDQUFDLENBQUM7YUFDTDtZQUFDLE9BQU0sR0FBRyxFQUFFO2dCQUNYLE9BQU8sQ0FBQyxHQUFHLENBQUMsR0FBRyxHQUFHLEVBQUUsQ0FBQyxDQUFDO2dCQUN2QixPQUFPLENBQUMsR0FBRyxDQUFDLGtCQUFrQixDQUFDLENBQUM7Z0JBQ2hDLE1BQU0sRUFBRSxDQUFDO2FBQ1Q7WUFBQSxDQUFDO1FBQ0osQ0FBQyxDQUFDLENBQUM7SUFDTixDQUFDLENBQUMsQ0FBQztBQUNKLENBQUMsQ0FBQztBQUdGLE1BQU0sY0FBYyxHQUFHLEdBQVMsRUFBRTtJQUNoQyxNQUFNLEVBQUUsR0FBRyxNQUFNLFlBQVksQ0FBQyxTQUFTLENBQUMsQ0FBQztJQUN6QyxPQUFPLENBQUMsR0FBRyxDQUFDLFVBQVUsQ0FBQyxDQUFDO0lBQ3hCLE9BQU8sQ0FBQyxHQUFHLENBQUMsNkJBQTZCLEVBQUUsQ0FBQyxRQUFRLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQztBQUsvRCxDQUFDLENBQUEsQ0FBQztBQUlGLGNBQWMsRUFBRSxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLypcclxuLy8gUHJpbWVyIGVqZW1wbG8uLi5cclxuLy8gUHJ1ZWJhIGRlIGVudG9ybm8uIEVsIGNsYXNpY28gaGVsbG8gd29ybGQuXHJcblxyXG5jb25zdCBzTWVzc2FnZSA9ICdIZWxsbyB3b3JsZCEhISdcclxuY29uc29sZS5sb2coc01lc3NhZ2UpXHJcblxyXG4qL1xyXG5cclxuLy8gSW1wb3J0YWNpb24gZGUgZGlmZXJlbnRlcyBvYmpldG9zIGRlc2RlIGxhIE5FTSBMaWJyYXJ5XHJcbmltcG9ydCB7TkVNTGlicmFyeSwgTmV0d29ya1R5cGVzLCBQYXNzd29yZCwgU2ltcGxlV2FsbGV0LCBBY2NvdW50SHR0cCwgQWRkcmVzcyxcclxuICAgICAgICBNb3NhaWNIdHRwLCBRdWVyeVBhcmFtcywgVHJhbnNhY3Rpb25IdHRwLCBUaW1lV2luZG93LCBUcmFuc2ZlclRyYW5zYWN0aW9uLFxyXG4gICAgICAgIFBsYWluTWVzc2FnZSwgQWNjb3VudCwgTW9zYWljVHJhbnNmZXJhYmxlLCBNb3NhaWN9IGZyb20gJ25lbS1saWJyYXJ5JztcclxuXHJcbi8vIEltcG9ydGFjaW9uIGRlIG1vZHVsbyBjb24gZnVuY2lvbmVzIHV0aWxlc1xyXG5pbXBvcnQgeyB0aW1lU3RhbXBQcmV0dHkgfSBmcm9tICcuL3ByaXZGdW5jdGlvbnMnO1xyXG5cclxuLy8gRGlzcG9uaWJpbGl6YWNpb24gZGVsIG9iamV0byBmcyAoZmlsZSBzeXN0ZW0pIGVuIGxhIHZhcmlhYmxlIGZzXHJcbi8vIEx1ZWdvIGVzdGEgdmFyaWFibGUgbm9zIHBlcm1pdGlyYSBpbnRlcmFjdHVhciBjb24gZWwgc2lzdGVtYSBkZVxyXG4vLyBhcmNoaXZvcyBkZWwgc2lzdGVtYSBvcGVyYXRpdm9cclxuY29uc3QgZnMgPSByZXF1aXJlKCdmcycpO1xyXG5cclxuLy8gQ29uZmlndXJhY2lvbiBkZSBsYSByZWQgZGUgTkVNIHNvYnJlIGxhIHF1ZSBxdWVyZW1vcyB0cmFiYWphclxyXG5ORU1MaWJyYXJ5LmJvb3RzdHJhcChOZXR3b3JrVHlwZXMuVEVTVF9ORVQpO1xyXG5cclxuLy8gVmFyaWFibGUgcGFyYSByZXNndWFyZGFyIGVsIHBhc3N3b3JkXHJcbmNvbnN0IG1pV2FsbGV0UGFzcyA9IG5ldyBQYXNzd29yZCgnMDFQcmltZXJUZXN0V2FsbGV0Jyk7XHJcbi8vIFRDR09JRVBLU0xUWDZUMkVOTVVZVDQzSDJaSE1FQ0hFNkNQV0RRNk5cclxuLy8gVENHT0lFLVBLU0xUWC02VDJFTk0tVVlUNDNILTJaSE1FQy1IRTZDUFctRFE2TlxyXG5cclxuLypcclxuLy8gU2VndW5kbyBFamVtcGxvLi4uXHJcbi8vIENyZWFjaW9uIGRlIHVuYSB3YWxsZXQuXHJcblxyXG5jb25zdCB0c3RXYWxsZXQgPSBTaW1wbGVXYWxsZXQuY3JlYXRlKCdXYWxsZXQgVGVzdCcsIG1pV2FsbGV0UGFzcyk7XHJcbmNvbnNvbGUubG9nKCdBIGNvbnRpbnVhY2lvbiBsYSBpbmZvcm1hY2lvbiBkZSBsYSB3YWxsZXQgY3JlYWRhOlxcbicpO1xyXG5jb25zb2xlLmxvZyh0c3RXYWxsZXQpO1xyXG5jb25zb2xlLmxvZygnXFxuJyk7XHJcbiovXHJcblxyXG4vKlxyXG4vLyBUZXJjZXIgRWplbXBsb1xyXG4vLyBDb25zdWx0YSBsYXMgdHJhbnNhY2Npb25lcyBkZSB1bmEgY3VlbnRhLlxyXG4vLyBPam8gY29uIGVsIGNvbXBvcnRhbWllbnRvIGFzaW5jcm9uby4gVmVyIHF1ZSBzdWNlZGUgZW50cmUgbGEgaW1wcmVzaW9uIGRlIGxhcyB0cmFuc2FjY2lvbmVzIHkgZWwgbWVuc2FqZSBkZSBmaW4geSBzYWxpZGFcclxuXHJcbmNvbnN0IG15QWRkcmVzcyA9IG5ldyBBZGRyZXNzKCdUQklVUU1PR0hVSDdHTjVMTTYyQ1E1Q0k0SkVYTVdVNDU1SVBISVlaJyk7XHJcblxyXG5jb25zb2xlLmxvZygnPT0+PlJlYWxpemFuZG8gdW5hIGNvbnN1bHRhIGEgbGEgVEVTVE5FVC4uLlxcbicpXHJcbmNvbnN0IGFjY291bnRIdHRwID0gbmV3IEFjY291bnRIdHRwKCk7XHJcblxyXG5hY2NvdW50SHR0cC5hbGxUcmFuc2FjdGlvbnMobXlBZGRyZXNzKVxyXG4uc3Vic2NyaWJlKGFsbFRyYW5zYWN0aW9ucyA9PiB7XHJcblx0Y29uc29sZS5sb2coYWxsVHJhbnNhY3Rpb25zKTtcclxufSk7XHJcblxyXG5jb25zb2xlLmxvZygnXFxuPT0+PlRlcm1pbmFuZG8geSBzYWxpZW5kby4uLlxcbicpXHJcblxyXG5cclxuLy8gT3RybyBlamVtcGxvLlxyXG4vLyBDb25zdWx0YW5kbyB0b2RvcyBsb3MgbW9zYWljb3MgZGVudHJvIGRlIHVuIE5hbWVTcGFjZSBkYWRvLCBlbiBlc3RlIGNhc28gXCJkb2N0YVwiXHJcbmNvbnNvbGUubG9nKCc9PT4+UmVhbGl6YW5kbyB1bmEgY29uc3VsdGEgc29icmUgbW9zYWljb3MuLi5cXG4nKVxyXG5jb25zdCBtb3NhaWNIdHRwID0gbmV3IE1vc2FpY0h0dHAoKTtcclxuY29uc3QgbmFtZVNwYWNlPSdkb2N0YV90ZXN0JztcclxuXHJcbm1vc2FpY0h0dHAuZ2V0QWxsTW9zYWljc0dpdmVuTmFtZXNwYWNlKG5hbWVTcGFjZSkuc3Vic2NyaWJlKG1vc2FpY0RlZmluaXRpb25zID0+IHtcclxuXHRjb25zb2xlLmxvZyhtb3NhaWNEZWZpbml0aW9ucyk7XHJcbn0pO1xyXG5cclxuY29uc29sZS5sb2coJ1xcbj09Pj5UZXJtaW5hbmRvIHkgc2FsaWVuZG8uLi5cXG4nKVxyXG4qL1xyXG5cclxuLy8gVmFyaWFibGUgZG9uZGUgc2UgYWxtYWNlbmEgbGEgcnV0YSBkb25kZSBzZSB2YSBhIGVzY3JpYmlyIGVsIGFyY2hpdm8gZGUgbGEgd2FsbGV0IGNyZWFkYS5cclxuY29uc3QgcnV0YVdhbGxldCA9ICdDOlxcXFxfQ3Vyc29cXFxcQ3J5cHRvUHJvamVjdHNcXFxcYmluJztcclxuLy8gVmFyaWFibGUgcXVlIHJlZ2lzdHJhIGVsIG5vbWJyZSBkZWwgYXJjaGl2byBkZSBsYSB3YWxsZXQgYSBndWFyZGFyXHJcbmNvbnN0IG5vbWJyZVdhbGxldEZpbGUgPSAnbWlXYWxsZXQud2x0JztcclxubGV0IGZ1bGxGaWxlV2FsbGV0UGF0aCA9IGAke3J1dGFXYWxsZXR9XFxcXCR7bm9tYnJlV2FsbGV0RmlsZX1gO1xyXG5jb25zdCB0aW1lc3RhbXAgPSB0aW1lU3RhbXBQcmV0dHkoKTtcclxuXHJcbi8qXHJcbi8vIEN1YXJ0byBFamVtcGxvXHJcbi8vIFNhbHZhciBlbiBkaXNjbyB1bmEgd2FsbGV0XHJcblxyXG5jb25zb2xlLmxvZygnPT0+PlNhbHZhbmRvIGxhIHdhbGxldC4uLlxcbicpXHJcblxyXG4vL1NlIHZlcmlmaWNhIHNpIHlhIGV4aXN0ZSB1bmEgd2FsbGV0XHJcbmlmIChmcy5leGlzdHNTeW5jKGZ1bGxGaWxlV2FsbGV0UGF0aCkpe1xyXG5cdC8vIFNlIGV4aXN0ZSB1biBhcmNoaXZvIGRlIHdhbGxldCwgc2UgY2FtYmlhIGVsIG5vbWJyZSB1c2FuZG8gdW4gdGltZXN0YW1wXHJcblx0ZnVsbEZpbGVXYWxsZXRQYXRoID0gYCR7cnV0YVdhbGxldH1cXFxcJHt0aW1lc3RhbXB9XyR7bm9tYnJlV2FsbGV0RmlsZX1gO1xyXG59O1xyXG5cclxuLy8gU2UgcGFzYSBsYSB3YWxsZXQgZGUgTkVNIGEgdW4gc3RyaW5nIHVlIGx1ZWdvIHB1ZWRlIHNlciBcImJhamFkb1wiIGEgZGlzY29cclxuY29uc3Qgd2FsbGV0U3RyaW5nID0gdHN0V2FsbGV0LndyaXRlV0xURmlsZSgpO1xyXG5cclxuLy8gTGEgc2lndWllbnRlIGxpbmVhIGVzIGxhIHF1ZSBcImJhamEgYSBkaXNjb1wiIGVsIFwic3RyaW5nXCIgZGUgbGEgd2FsbGV0IGRlIE5FTSBjcmVhZGFcclxuZnMud3JpdGVGaWxlU3luYyhmdWxsRmlsZVdhbGxldFBhdGgsIHdhbGxldFN0cmluZyk7XHJcbmNvbnNvbGUubG9nKGBcXG49PT4+TGEgd2FsbGV0IHNlIGd1YXJkbyBleGl0b3NhbWVudGUgZW46ICR7ZnVsbEZpbGVXYWxsZXRQYXRofVxcbmApO1xyXG5cclxuLy8gLy8gRXNjcmliaWVuZG8gZWwgYXJjaGl2byBkZSBsYSB3YWxsZXQsIHBlcm8gZXN0YSB2ZXogZGUgZm9ybWEgYXNpbmNyb25hLlxyXG4vLyBmcy53cml0ZUZpbGUoYCR7ZnVsbEZpbGVXYWxsZXRQYXRofWAsIHdhbGxldFN0cmluZywgKGVycikgPT4ge1xyXG4vLyAgICAgLy8gU2kgbGEgZXNjcml0dXJhIGRlIGxhIHdhbGxldCBkYSBlcnJvciwgc2UgY2FwdHVyYSBlbCBlcnJvclxyXG4vLyAgICAgaWYgKGVycikgdGhyb3cgZXJyO1xyXG4vL1xyXG4vLyAgICAgLy8gc2kgdmEgdG9kbyBiaWVuLCBzZSBkYSB1biBtZW5zYWplIGRlIGV4aXRvXHJcbi8vICAgICBjb25zb2xlLmxvZyhgXFxuPT0+PkxhIHdhbGxldCBzZSBndWFyZG8gZXhpdG9zYW1lbnRlIGVuOiAke3J1dGFXYWxsZXR9JHtub21icmVXYWxsZXRGaWxlfVxcbmApXHJcbi8vIH0pO1xyXG4qL1xyXG5cclxuLypcclxuLy8gUXVpbnRvIEVqZW1wbG9cclxuLy8gTGV5ZW5kbyB1bmEgd2FsbGV0IGRlc2RlIGVsIGRpc2NvXHJcblxyXG5cclxuLy8gTGV5ZW5kbyBlbCBhcmNoaXZvIGRlIGxhIHdhbGxldC4uLlxyXG5jb25zb2xlLmxvZygnQ2FyZ2FuZG8gZWwgY29udGVuaWRvIGRlbCBhcmNoaXZvIChlbiBjcnVkbykgZGUgbGEgd2FsbGV0IGVuIHVuYSB2YXJpYWJsZVxcbicpO1xyXG5jb25zdCB0bXBTdHJNaVdhbGxldCA9IGZzLnJlYWRGaWxlU3luYyhgJHtmdWxsRmlsZVdhbGxldFBhdGh9YCwgJ3V0ZjgnKTtcclxuY29uc29sZS5sb2coJ1xcbkVsIGFyY2hpdm8gXCJwdXJvXCIgZGUgbGEgd2FsbGV0IGNvbnRpZW5lOlxcbicpO1xyXG5jb25zb2xlLmxvZyh0bXBTdHJNaVdhbGxldCk7XHJcbmNvbnNvbGUubG9nKCdcXG4nKTtcclxuXHJcblxyXG4vLyBTaSBsYSB3YWxsZXQgYSBsZWVyIGZ1ZSBjcmVhZGEgZGUgbWFuZXJhIHNlbmNpbGxhLCBlcyBkZWNpciwgc2luIHVzYXIgbGEgXCJOYW5vIFdhbGxldFwiLlxyXG5jb25zdCBtaVdhbGxldCA9IFNpbXBsZVdhbGxldC5yZWFkRnJvbVdMVCh0bXBTdHJNaVdhbGxldCk7XHJcblxyXG4vLyBTaSBsYSB3YWxsZXQgYSBsZWVyIGZ1ZSBjcmVhZGEgY29uIGxhIFwiTmFubyBXYWxsbGV0XCJcclxuLy9jb25zdCBtaVdhbGxldCA9IFNpbXBsZVdhbGxldC5yZWFkRnJvbU5hbm9XYWxsZXRXTEYodG1wU3RyTWlXYWxsZXQpO1xyXG5cclxuY29uc29sZS5sb2coJ1xcbkVsIGNvbnRlbmlkbyBkZSBsYSB3YWxsZXQgc2VndW4gTkVNIGVzOlxcbicpO1xyXG5jb25zb2xlLmxvZyhtaVdhbGxldCk7XHJcbmNvbnNvbGUubG9nKCdcXG4nKTtcclxuXHJcbmNvbnNvbGUubG9nKCdcXG5BYnJpZW5kbyBsYSB3YWxsZXQgcGFyYSB2ZXIgbGEgaW5mb3JtYWNpb24gZGV0YWxsYWRhIGRlIGxhIG1pc21hOlxcbicpO1xyXG5jb25zdCBtaUN1ZW50YSA9IG1pV2FsbGV0Lm9wZW4obWlXYWxsZXRQYXNzKTtcclxuY29uc29sZS5sb2coJ1xcbkxhIGluZm9ybWFjaW9uIGRlIGxhIGN1ZW50YSBjb250ZW5pZGEgZW4gbGEgd2FsbGV0IGVzOlxcbicpO1xyXG5jb25zb2xlLmxvZyhtaUN1ZW50YSk7XHJcbmNvbnNvbGUubG9nKCdcXG4nKTtcclxuXHJcblxyXG4vLyBFeHRyYWUgbGEgYWRkcmVzcyBvIGRpcmVjY2lvbiBkZSBsYSB3YWxsZXQuXHJcbi8vIExhIGFkZHJlc3Mgc2UgcHVlZGUgZXh0cmFlciBkZSBsYSBtaXNtYSB3YWxsZXQgbyBkZSBsYSBjdWVudGFcclxuY29uc3QgbXlBZGRyZXNzID0gbWlXYWxsZXQuYWRkcmVzcztcclxuY29uc29sZS5sb2coJ0xhIGFkZHJlc3MgbyBkaXJlY2Npb24gZGUgbGEgY3VlbnRhIGNvbnRlbmlkYSBlbiBsYSB3YWxsZXQgZXM6XFxuJyk7XHJcbmNvbnNvbGUubG9nKG15QWRkcmVzcy5wcmV0dHkoKSk7XHJcbmNvbnNvbGUubG9nKCdcXG4nKTtcclxuKi9cclxuXHJcbi8qXHJcbi8vIFNleHRvIEVqZW1wbG9cclxuLy8gRW52aWFyIHRva2VuXHJcblxyXG4vLyBDcmVhIHVuYSB0cmFzbnNhY2Npb25cclxuY29uc3QgdHJhbnNhY3Rpb25IdHRwID0gbmV3IFRyYW5zYWN0aW9uSHR0cCgpO1xyXG5cclxuLy8gU2UgZ3VhcmRhIGVuIHVuYSB2YXJpYWJsZSB0ZW1wb3JhbCBsYSBjbGF2ZSBwcml2YWRhIGRlIHF1aWVuIGVudmlhXHJcbi8vIExvIGludGVyZXNhbnRlIHNlcmlhIGFicmlyIGxhIHdhbGxldCwgc2FjYXIgbGEgZGF0YSB5IGNvbiBlc3RhIGRhdGEgZmlybWFyIGxhIHRyYW5zYWNjaW9uLlxyXG4vL2NvbnN0IHByaXZhdGVLZXk6IHN0cmluZyA9IHByb2Nlc3MuZW52LlBSSVZBVEVfS0VZO1xyXG5jb25zdCBwcml2YXRlS2V5OiBzdHJpbmcgPSBcIjM5YmVkMGEyYWEyN2FlZWRkNzM3NDc4OGNjZWZhNjQ0ZDc4YzI1ZjhjYjFlMDZiNjA4MGM5NmFkZjZiMzJjYWFcIjtcclxuXHJcbi8vIENyZWEgdW5hIGN1ZW50YSBjb24gbGEgY2xhdmUgcHJpdmFkYS5cclxuY29uc3QgYWNjb3VudCA9IEFjY291bnQuY3JlYXRlV2l0aFByaXZhdGVLZXkocHJpdmF0ZUtleSk7XHJcblxyXG4vL2NvbnN0IHRyYW5zZmVyVHJhbnNhY3Rpb24gPSBUcmFuc2ZlclRyYW5zYWN0aW9uLmNyZWF0ZShcclxuLy8gICAgVGltZVdpbmRvdy5jcmVhdGVXaXRoRGVhZGxpbmUoKSxcclxuLy8gICAgbmV3IEFkZHJlc3MoXCJUQVNFQlItRTNPWUtaLURDNVhLQS1RTEFJWFgtSUxMTEhCLVFSTlNGUi1NU0pQXCIpLFxyXG4vLyAgICBuZXcgWEVNKDApLFxyXG4vLyAgICBQbGFpbk1lc3NhZ2UuY3JlYXRlKFwiQSB2ZXIgc2kgbGxlZ2EgZWwgbWVuc2FqZS4uLlwiKVxyXG4vLyk7XHJcblxyXG4vLyBDcmVhIHVuYSB0cmFuc2FjY2lvbiB5IGxhIGVudmlhLi4uXHJcbmNvbnN0IHRyYW5zZmVyVHJhbnNhY3Rpb24gPSBUcmFuc2ZlclRyYW5zYWN0aW9uLmNyZWF0ZShcclxuICAgIFRpbWVXaW5kb3cuY3JlYXRlV2l0aERlYWRsaW5lKCksXHJcbiAgICBuZXcgQWRkcmVzcyhcIlREVTdMSkZGNVNaNlJBM1dPUE41NEhNTlIyUUxPNVhJM1dEVk5JSDNcIiksXHJcbiAgICBuZXcgWEVNKDUpLFxyXG4gICAgUGxhaW5NZXNzYWdlLmNyZWF0ZShcIlByb2dyYW1hbmRvIGVuIGVsIEFjY2VsZXJhdG9yIEJsb2NrY2hhaW4hISFcIilcclxuKTtcclxuXHJcbmNvbnN0IHNpZ25lZFRyYW5zYWN0aW9uID0gYWNjb3VudC5zaWduVHJhbnNhY3Rpb24odHJhbnNmZXJUcmFuc2FjdGlvbik7XHJcblxyXG5jb25zb2xlLmxvZyhzaWduZWRUcmFuc2FjdGlvbik7XHJcblxyXG50cmFuc2FjdGlvbkh0dHAuYW5ub3VuY2VUcmFuc2FjdGlvbihzaWduZWRUcmFuc2FjdGlvbikuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xyXG4qL1xyXG5cclxuLypcclxuLy8gU2VwdGltbyBFamVtcGxvXHJcbi8vIFJldmlzYXIgYmFsYW5jZXNcclxuXHJcblxyXG4vLyBSZXZpc2FyIGJhbGFuY2UgZGUgWEVNXHJcbi8vIFJldmlzYXIgYmxhbmNlcyBkZSBNT1NBSUNzXHJcblxyXG5jb25zdCBteUFjY291bnQgPSBuZXcgQWNjb3VudEh0dHAoKTtcclxubXlBY2NvdW50LmdldE1vc2FpY093bmVkQnlBZGRyZXNzKG15QWRkcmVzcykuc3Vic2NyaWJlKG1vc2FpY3MgPT4ge1xyXG4gIGNvbnN0IHhlbU1vc2FpYyA9IG1vc2FpY3MuZmluZCgobW9zYWljKSA9PiB7XHJcblx0XHRyZXR1cm4gbW9zYWljLm1vc2FpY0lkLm5hbWUgPT09ICd4ZW0nO1xyXG5cdH0pO1xyXG5cdGlmICgheGVtTW9zYWljKSB7XHJcbiAgICBjb25zb2xlLmxvZygnTGEgY2FudGlkYWQgWEVNIGVzOiAwJyk7XHJcbiAgfSBlbHNlIHtcclxuXHQgICBjb25zb2xlLmxvZyhgTGEgY2FudGlkYWQgWEVNIGVzOiAke3hlbU1vc2FpYy5xdWFudGl0eSAvIDFlNn1gKTtcclxuICB9O1xyXG5cclxuICBjb25zdCBkb2N0YU1vc2FpYyA9IG1vc2FpY3MuZmluZCgobW9zYWljKSA9PiB7XHJcbiAgICByZXR1cm4gbW9zYWljLm1vc2FpY0lkLm5hbWUgPT09ICdkb2N0YXRzdCc7XHJcbiAgfSk7XHJcbiAgaWYgKCFkb2N0YU1vc2FpYykge1xyXG4gICAgY29uc29sZS5sb2coJ0xhIGNhbnRpZGFkIGRvY3RhdHN0IGVzOiAwJyk7XHJcbiAgfSBlbHNlIHtcclxuICAgICBjb25zb2xlLmxvZyhgTGEgY2FudGlkYWQgZG9jdGF0c3QgZXM6ICR7ZG9jdGFNb3NhaWMucXVhbnRpdHkgLyAxZTZ9YCk7XHJcbiAgfTtcclxufSk7XHJcbiovXHJcblxyXG4vKlxyXG4vLyBPY3Rhdm8gRWplbXBsb1xyXG4vLyBIYWNlciB0cmFuc2FjY2lvbmVzXHJcbiovXHJcblxyXG4vLyBEZXYgQWNjb3VudFxyXG4vLyBBY2NvdW50IHtcclxuLy8gICBhZGRyZXNzOiBBZGRyZXNzIHtcclxuLy8gICAgIHZhbHVlOiAnVENHT0lFUEtTTFRYNlQyRU5NVVlUNDNIMlpITUVDSEU2Q1BXRFE2TicsXHJcbi8vICAgICBuZXR3b3JrVHlwZTogMTUyXHJcbi8vICAgfSxcclxuLy8gICBwdWJsaWNLZXk6ICc5NTBjOGM5OTMwOWQ2MjQ4MWQyN2VlNjczNjEyZDJmOWM2Njk2YjU5NjIxMzg0ZmE3ZjQ2MWYxNzZmZmZiNTlkJyxcclxuLy8gICBwcml2YXRlS2V5OiAnYzRjNDA1MDRmZGVkMDI4ODQ1NWIyZGJiMDJhZDQ3ZmZiYTBkYmFiMzFhODgyMjUxMzkxYTQ1NDkwNTg1N2I5YydcclxuLy8gfVxyXG4vL1xyXG4vLyBUQVNFQlJFM09ZS1pEQzVYS0FRTEFJWFhJTExMSEJRUk5TRlJNU0pQID09Pj4gRXN0YSBlcyBtaSBuYW5vd2FsbGV0IERvY3RhXHJcblxyXG4vLyBMZXllbmRvIGVsIGFyY2hpdm8gZGUgbGEgd2FsbGV0Li4uXHJcbmNvbnNvbGUubG9nKCdDYXJnYW5kbyBlbCBjb250ZW5pZG8gZGVsIGFyY2hpdm8gKGVuIGNydWRvKSBkZSBsYSB3YWxsZXQgZW4gdW5hIHZhcmlhYmxlXFxuJyk7XHJcbmNvbnN0IHRtcFN0ck1pV2FsbGV0ID0gZnMucmVhZEZpbGVTeW5jKGAke2Z1bGxGaWxlV2FsbGV0UGF0aH1gLCAndXRmOCcpO1xyXG5jb25zdCBtaVdhbGxldCA9IFNpbXBsZVdhbGxldC5yZWFkRnJvbVdMVCh0bXBTdHJNaVdhbGxldCk7XHJcbmNvbnN0IG15QWRkcmVzcyA9IG1pV2FsbGV0LmFkZHJlc3M7XHJcbmNvbnNvbGUubG9nKCdMYSBhZGRyZXNzIG8gZGlyZWNjaW9uIGRlIGxhIGN1ZW50YSBjb250ZW5pZGEgZW4gbGEgd2FsbGV0IGVzOlxcbicpO1xyXG5jb25zb2xlLmxvZyhteUFkZHJlc3MucHJldHR5KCkpO1xyXG5cclxuLy8gRnVuY2lvbiBwYXJhIGJ1c2NhciB1biBtb3NhaWNvIGVuIHVuYSB3YWxsZXQuXHJcbmNvbnN0IHNlYXJjaE1vc2FpYyA9IChhZGRyZXNzOiBBZGRyZXNzKTogUHJvbWlzZTxNb3NhaWM+ID0+IHtcclxuXHRyZXR1cm4gbmV3IFByb21pc2U8TW9zYWljPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcblx0XHRjb25zb2xlLmxvZyhgQnVzY2FuZG8gbW9zYWljbyBlbiBsYSBkaXJlY2Npb246ICR7YWRkcmVzcy5wcmV0dHkoKX1gKTtcclxuXHJcbiAgICBjb25zdCBteUFjY291bnQgPSBuZXcgQWNjb3VudEh0dHAoKTtcclxuICAgIG15QWNjb3VudC5nZXRNb3NhaWNPd25lZEJ5QWRkcmVzcyhhZGRyZXNzKS5zdWJzY3JpYmUobW9zYWljcyA9PiB7XHJcbiAgICAgIHRyeXtcclxuICAgICAgICByZXNvbHZlKG1vc2FpY3MuZmluZCgobW9zYWljKSA9PiB7XHJcbiAgICAgICAgICByZXR1cm4gbW9zYWljLm1vc2FpY0lkLm5hbWUgPT09ICdkb2N0YXRzdCc7XHJcbiAgICAgICAgfSkpO1xyXG4gICAgICB9IGNhdGNoKGVycikge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGAke2Vycn1gKTtcclxuICAgIFx0XHRcdGNvbnNvbGUubG9nKCdQbGVhc2UgdHJ5IGFnYWluJyk7XHJcbiAgICBcdFx0XHRyZWplY3QoKTtcclxuICAgICAgfTtcclxuICAgIH0pO1xyXG5cdH0pO1xyXG59O1xyXG5cclxuLy8gRnVuY2lvbiBwYXJhIGltcHJpbWlyIGxhIGluZm9ybWFjaW9uIGRlIHVuIG1vc2FpY28uXHJcbmNvbnN0IGltcHJpbWVNb3NhaWNvID0gYXN5bmMgKCkgPT4ge1xyXG4gIGNvbnN0IHBwID0gYXdhaXQgc2VhcmNoTW9zYWljKG15QWRkcmVzcyk7XHJcbiAgY29uc29sZS5sb2coJ0hvbGEgeHl6Jyk7XHJcbiAgY29uc29sZS5sb2coYEVsIG1vc2FpY28gZW5jb250cmFkbyBlczogJHtwcC5tb3NhaWNJZC5uYW1lfWApO1xyXG5cclxuXHJcbiAgLy9jb25zdCBwcHRyYW5zZmVyID0gbmV3IE1vc2FpY1RyYW5zZmVyYWJsZS5cclxuXHJcbn07XHJcblxyXG4vL2NvbnN0IHNlbGVjdGVkTW9zYWljID0gbmV3IE1vc2FpY1RyYW5zZmVyYWJsZSgpO1xyXG5cclxuaW1wcmltZU1vc2FpY28oKTtcclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG4vLyAvLyBDcmVhIHVuYSB0cmFzbnNhY2Npb25cclxuLy8gY29uc3QgdHJhbnNhY3Rpb25IdHRwID0gbmV3IFRyYW5zYWN0aW9uSHR0cCgpO1xyXG4vL1xyXG4vLyAvLyBTZSBndWFyZGEgZW4gdW5hIHZhcmlhYmxlIHRlbXBvcmFsIGxhIGNsYXZlIHByaXZhZGEgZGUgcXVpZW4gZW52aWFcclxuLy8gLy8gTG8gaW50ZXJlc2FudGUgc2VyaWEgYWJyaXIgbGEgd2FsbGV0LCBzYWNhciBsYSBkYXRhIHkgY29uIGVzdGEgZGF0YSBmaXJtYXIgbGEgdHJhbnNhY2Npb24uXHJcbi8vIC8vY29uc3QgcHJpdmF0ZUtleTogc3RyaW5nID0gcHJvY2Vzcy5lbnYuUFJJVkFURV9LRVk7XHJcbi8vIGNvbnN0IHByaXZhdGVLZXk6IHN0cmluZyA9ICdjNGM0MDUwNGZkZWQwMjg4NDU1YjJkYmIwMmFkNDdmZmJhMGRiYWIzMWE4ODIyNTEzOTFhNDU0OTA1ODU3YjljJztcclxuLy9cclxuLy8gLy8gQ3JlYSB1bmEgY3VlbnRhIGNvbiBsYSBjbGF2ZSBwcml2YWRhLlxyXG4vLyBjb25zdCBhY2NvdW50ID0gQWNjb3VudC5jcmVhdGVXaXRoUHJpdmF0ZUtleShwcml2YXRlS2V5KTtcclxuLy9cclxuLy8gLy8gQ3JlYSB1bmEgdHJhbnNhY2Npb24geSBsYSBlbnZpYS4uLlxyXG4vLyBjb25zdCB0cmFuc2ZlclRyYW5zYWN0aW9uID0gVHJhbnNmZXJUcmFuc2FjdGlvbi5jcmVhdGUoXHJcbi8vICAgICBUaW1lV2luZG93LmNyZWF0ZVdpdGhEZWFkbGluZSgpLFxyXG4vLyAgICAgbmV3IEFkZHJlc3MoXCJUQVNFQlJFM09ZS1pEQzVYS0FRTEFJWFhJTExMSEJRUk5TRlJNU0pQXCIpLFxyXG4vLyAgICAgbmV3IFhFTSg1KSxcclxuLy8gICAgIFBsYWluTWVzc2FnZS5jcmVhdGUoXCJQcm9ncmFtYW5kbyBlbiBlbCBBY2NlbGVyYXRvciBCbG9ja2NoYWluISEhXCIpXHJcbi8vICk7XHJcbi8vIGNvbnN0IHNpZ25lZFRyYW5zYWN0aW9uID0gYWNjb3VudC5zaWduVHJhbnNhY3Rpb24odHJhbnNmZXJUcmFuc2FjdGlvbik7XHJcbi8vIGNvbnNvbGUubG9nKHNpZ25lZFRyYW5zYWN0aW9uKTtcclxuLy8gdHJhbnNhY3Rpb25IdHRwLmFubm91bmNlVHJhbnNhY3Rpb24oc2lnbmVkVHJhbnNhY3Rpb24pLnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcclxuXHJcbi8vIFJldmlzYXIgY29tbyBoYWNlIGxhIHRyYW5zYWNjaW9uIGVuIGh0dHBzOi8vZ2l0aHViLmNvbS9kZ2FyY2lhMzYwL05FTVBheS9ibG9iL21hc3Rlci9zcmMvcGFnZXMvdHJhbnNmZXIvdHJhbnNmZXIudHNcclxuIl19