"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const nem_library_1 = require("nem-library");
const privFunctions_1 = require("./privFunctions");
const fs = require('fs');
nem_library_1.NEMLibrary.bootstrap(nem_library_1.NetworkTypes.TEST_NET);
const miWalletPass = new nem_library_1.Password('01PrimerTestWallet');
const rutaWallet = 'C:\\_Curso\\CryptoProjects\\bin';
const nombreWalletFile = 'miWallet.wlt';
let fullFileWalletPath = `${rutaWallet}\\${nombreWalletFile}`;
const timestamp = privFunctions_1.timeStampPretty();
const transferTransaction = nem_library_1.TransferTransaction.create(nem_library_1.TimeWindow.createWithDeadline(), new nem_library_1.Address("TASEBRE3OYKZDC5XKAQLAIXXILLLHBQRNSFRMSJP"), new nem_library_1.XEM(1), nem_library_1.PlainMessage.create("Programando con NEM Blockchain en Santiago!!!"));
let NodoNEM = { protocol: 'https', domain: 'nistest.opening-line.jp', port: 7891 };
const transactionHttp = new nem_library_1.TransactionHttp([NodoNEM]);
const privateKey = "c4c40504fded0288455b2dbb02ad47ffba0dbab31a882251391a454905857b9c";
const account = nem_library_1.Account.createWithPrivateKey(privateKey);
const signedTransaction = account.signTransaction(transferTransaction);
console.log(signedTransaction);
transactionHttp.announceTransaction(signedTransaction).subscribe(x => {
    console.log(x);
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJpbmRleC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQVVBLDZDQUVtSTtBQUduSSxtREFBa0Q7QUFLbEQsTUFBTSxFQUFFLEdBQUcsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDO0FBR3pCLHdCQUFVLENBQUMsU0FBUyxDQUFDLDBCQUFZLENBQUMsUUFBUSxDQUFDLENBQUM7QUFHNUMsTUFBTSxZQUFZLEdBQUcsSUFBSSxzQkFBUSxDQUFDLG9CQUFvQixDQUFDLENBQUM7QUE4Q3hELE1BQU0sVUFBVSxHQUFHLGlDQUFpQyxDQUFDO0FBRXJELE1BQU0sZ0JBQWdCLEdBQUcsY0FBYyxDQUFDO0FBQ3hDLElBQUksa0JBQWtCLEdBQUcsR0FBRyxVQUFVLEtBQUssZ0JBQWdCLEVBQUUsQ0FBQztBQUM5RCxNQUFNLFNBQVMsR0FBRywrQkFBZSxFQUFFLENBQUM7QUE0RXBDLE1BQU0sbUJBQW1CLEdBQUcsaUNBQW1CLENBQUMsTUFBTSxDQUNsRCx3QkFBVSxDQUFDLGtCQUFrQixFQUFFLEVBQy9CLElBQUkscUJBQU8sQ0FBQywwQ0FBMEMsQ0FBQyxFQUN2RCxJQUFJLGlCQUFHLENBQUMsQ0FBQyxDQUFDLEVBQ1YsMEJBQVksQ0FBQyxNQUFNLENBQUMsK0NBQStDLENBQUMsQ0FDdkUsQ0FBQztBQUlGLElBQUksT0FBTyxHQUFpQixFQUFDLFFBQVEsRUFBRSxPQUFPLEVBQUUsTUFBTSxFQUFFLHlCQUF5QixFQUFFLElBQUksRUFBRSxJQUFJLEVBQUMsQ0FBQztBQUMvRixNQUFNLGVBQWUsR0FBRyxJQUFJLDZCQUFlLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDO0FBS3ZELE1BQU0sVUFBVSxHQUFXLGtFQUFrRSxDQUFDO0FBRzlGLE1BQU0sT0FBTyxHQUFHLHFCQUFPLENBQUMsb0JBQW9CLENBQUMsVUFBVSxDQUFDLENBQUM7QUFFekQsTUFBTSxpQkFBaUIsR0FBRyxPQUFPLENBQUMsZUFBZSxDQUFDLG1CQUFtQixDQUFDLENBQUM7QUFFdkUsT0FBTyxDQUFDLEdBQUcsQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDO0FBRS9CLGVBQWUsQ0FBQyxtQkFBbUIsQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsRUFBRTtJQUNuRSxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFBO0FBQ2hCLENBQUMsQ0FBQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLypcclxuLy8gUHJpbWVyIGVqZW1wbG8uLi5cclxuLy8gUHJ1ZWJhIGRlIGVudG9ybm8uIEVsIGNsYXNpY28gaGVsbG8gd29ybGQuXHJcblxyXG5jb25zdCBzTWVzc2FnZSA9ICdIZWxsbyB3b3JsZCEhISdcclxuY29uc29sZS5sb2coc01lc3NhZ2UpXHJcblxyXG4qL1xyXG5cclxuLy8gSW1wb3J0YWNpb24gZGUgZGlmZXJlbnRlcyBvYmpldG9zIGRlc2RlIGxhIE5FTSBMaWJyYXJ5XHJcbmltcG9ydCB7TkVNTGlicmFyeSwgTmV0d29ya1R5cGVzLCBQYXNzd29yZCwgU2ltcGxlV2FsbGV0LCBBY2NvdW50SHR0cCwgQWRkcmVzcyxcclxuICAgICAgICBNb3NhaWNIdHRwLCBRdWVyeVBhcmFtcywgVHJhbnNhY3Rpb25IdHRwLCBUaW1lV2luZG93LCBUcmFuc2ZlclRyYW5zYWN0aW9uLFxyXG4gICAgICAgIFBsYWluTWVzc2FnZSwgQWNjb3VudCwgTW9zYWljLCBNb3NhaWNUcmFuc2ZlcmFibGUsIE1vc2FpY0lkLCBYRU0sIE5vZGVIdHRwLCBIdHRwRW5kcG9pbnQsIFNlcnZlckNvbmZpZ30gZnJvbSAnbmVtLWxpYnJhcnknO1xyXG5cclxuLy8gSW1wb3J0YWNpb24gZGUgbW9kdWxvIGNvbiBmdW5jaW9uZXMgdXRpbGVzXHJcbmltcG9ydCB7IHRpbWVTdGFtcFByZXR0eSB9IGZyb20gJy4vcHJpdkZ1bmN0aW9ucyc7XHJcblxyXG4vLyBEaXNwb25pYmlsaXphY2lvbiBkZWwgb2JqZXRvIGZzIChmaWxlIHN5c3RlbSkgZW4gbGEgdmFyaWFibGUgZnNcclxuLy8gTHVlZ28gZXN0YSB2YXJpYWJsZSBub3MgcGVybWl0aXJhIGludGVyYWN0dWFyIGNvbiBlbCBzaXN0ZW1hIGRlXHJcbi8vIGFyY2hpdm9zIGRlbCBzaXN0ZW1hIG9wZXJhdGl2b1xyXG5jb25zdCBmcyA9IHJlcXVpcmUoJ2ZzJyk7XHJcblxyXG4vLyBDb25maWd1cmFjaW9uIGRlIGxhIHJlZCBkZSBORU0gc29icmUgbGEgcXVlIHF1ZXJlbW9zIHRyYWJhamFyXHJcbk5FTUxpYnJhcnkuYm9vdHN0cmFwKE5ldHdvcmtUeXBlcy5URVNUX05FVCk7XHJcblxyXG4vLyBWYXJpYWJsZSBwYXJhIHJlc2d1YXJkYXIgZWwgcGFzc3dvcmRcclxuY29uc3QgbWlXYWxsZXRQYXNzID0gbmV3IFBhc3N3b3JkKCcwMVByaW1lclRlc3RXYWxsZXQnKTtcclxuLy8gVENHT0lFUEtTTFRYNlQyRU5NVVlUNDNIMlpITUVDSEU2Q1BXRFE2TlxyXG4vLyBUQ0dPSUUtUEtTTFRYLTZUMkVOTS1VWVQ0M0gtMlpITUVDLUhFNkNQVy1EUTZOXHJcblxyXG4vKlxyXG4vLyBTZWd1bmRvIEVqZW1wbG8uLi5cclxuLy8gQ3JlYWNpb24gZGUgdW5hIHdhbGxldC5cclxuXHJcbmNvbnN0IHRzdFdhbGxldCA9IFNpbXBsZVdhbGxldC5jcmVhdGUoJ1dhbGxldCBUZXN0JywgbWlXYWxsZXRQYXNzKTtcclxuY29uc29sZS5sb2coJ0EgY29udGludWFjaW9uIGxhIGluZm9ybWFjaW9uIGRlIGxhIHdhbGxldCBjcmVhZGE6XFxuJyk7XHJcbmNvbnNvbGUubG9nKHRzdFdhbGxldCk7XHJcbmNvbnNvbGUubG9nKCdcXG4nKTtcclxuKi9cclxuXHJcbi8qXHJcbi8vIFRlcmNlciBFamVtcGxvXHJcbi8vIENvbnN1bHRhIGxhcyB0cmFuc2FjY2lvbmVzIGRlIHVuYSBjdWVudGEuXHJcbi8vIE9qbyBjb24gZWwgY29tcG9ydGFtaWVudG8gYXNpbmNyb25vLiBWZXIgcXVlIHN1Y2VkZSBlbnRyZSBsYSBpbXByZXNpb24gZGUgbGFzIHRyYW5zYWNjaW9uZXMgeSBlbCBtZW5zYWplIGRlIGZpbiB5IHNhbGlkYVxyXG5cclxuY29uc3QgbXlBZGRyZXNzID0gbmV3IEFkZHJlc3MoJ1RCSVVRTU9HSFVIN0dONUxNNjJDUTVDSTRKRVhNV1U0NTVJUEhJWVonKTtcclxuXHJcbmNvbnNvbGUubG9nKCc9PT4+UmVhbGl6YW5kbyB1bmEgY29uc3VsdGEgYSBsYSBURVNUTkVULi4uXFxuJylcclxuY29uc3QgYWNjb3VudEh0dHAgPSBuZXcgQWNjb3VudEh0dHAoKTtcclxuXHJcbmFjY291bnRIdHRwLmFsbFRyYW5zYWN0aW9ucyhteUFkZHJlc3MpXHJcbi5zdWJzY3JpYmUoYWxsVHJhbnNhY3Rpb25zID0+IHtcclxuXHRjb25zb2xlLmxvZyhhbGxUcmFuc2FjdGlvbnMpO1xyXG59KTtcclxuXHJcbmNvbnNvbGUubG9nKCdcXG49PT4+VGVybWluYW5kbyB5IHNhbGllbmRvLi4uXFxuJylcclxuXHJcblxyXG4vLyBPdHJvIGVqZW1wbG8uXHJcbi8vIENvbnN1bHRhbmRvIHRvZG9zIGxvcyBtb3NhaWNvcyBkZW50cm8gZGUgdW4gTmFtZVNwYWNlIGRhZG8sIGVuIGVzdGUgY2FzbyBcImRvY3RhXCJcclxuY29uc29sZS5sb2coJz09Pj5SZWFsaXphbmRvIHVuYSBjb25zdWx0YSBzb2JyZSBtb3NhaWNvcy4uLlxcbicpXHJcbmNvbnN0IG1vc2FpY0h0dHAgPSBuZXcgTW9zYWljSHR0cCgpO1xyXG5jb25zdCBuYW1lU3BhY2U9J2RvY3RhX3Rlc3QnO1xyXG5cclxubW9zYWljSHR0cC5nZXRBbGxNb3NhaWNzR2l2ZW5OYW1lc3BhY2UobmFtZVNwYWNlKS5zdWJzY3JpYmUobW9zYWljRGVmaW5pdGlvbnMgPT4ge1xyXG5cdGNvbnNvbGUubG9nKG1vc2FpY0RlZmluaXRpb25zKTtcclxufSk7XHJcblxyXG5jb25zb2xlLmxvZygnXFxuPT0+PlRlcm1pbmFuZG8geSBzYWxpZW5kby4uLlxcbicpXHJcbiovXHJcblxyXG4vLyBWYXJpYWJsZSBkb25kZSBzZSBhbG1hY2VuYSBsYSBydXRhIGRvbmRlIHNlIHZhIGEgZXNjcmliaXIgZWwgYXJjaGl2byBkZSBsYSB3YWxsZXQgY3JlYWRhLlxyXG5jb25zdCBydXRhV2FsbGV0ID0gJ0M6XFxcXF9DdXJzb1xcXFxDcnlwdG9Qcm9qZWN0c1xcXFxiaW4nO1xyXG4vLyBWYXJpYWJsZSBxdWUgcmVnaXN0cmEgZWwgbm9tYnJlIGRlbCBhcmNoaXZvIGRlIGxhIHdhbGxldCBhIGd1YXJkYXJcclxuY29uc3Qgbm9tYnJlV2FsbGV0RmlsZSA9ICdtaVdhbGxldC53bHQnO1xyXG5sZXQgZnVsbEZpbGVXYWxsZXRQYXRoID0gYCR7cnV0YVdhbGxldH1cXFxcJHtub21icmVXYWxsZXRGaWxlfWA7XHJcbmNvbnN0IHRpbWVzdGFtcCA9IHRpbWVTdGFtcFByZXR0eSgpO1xyXG5cclxuLypcclxuLy8gQ3VhcnRvIEVqZW1wbG9cclxuLy8gU2FsdmFyIGVuIGRpc2NvIHVuYSB3YWxsZXRcclxuXHJcbmNvbnNvbGUubG9nKCc9PT4+U2FsdmFuZG8gbGEgd2FsbGV0Li4uXFxuJylcclxuXHJcbi8vU2UgdmVyaWZpY2Egc2kgeWEgZXhpc3RlIHVuYSB3YWxsZXRcclxuaWYgKGZzLmV4aXN0c1N5bmMoZnVsbEZpbGVXYWxsZXRQYXRoKSl7XHJcblx0Ly8gU2UgZXhpc3RlIHVuIGFyY2hpdm8gZGUgd2FsbGV0LCBzZSBjYW1iaWEgZWwgbm9tYnJlIHVzYW5kbyB1biB0aW1lc3RhbXBcclxuXHRmdWxsRmlsZVdhbGxldFBhdGggPSBgJHtydXRhV2FsbGV0fVxcXFwke3RpbWVzdGFtcH1fJHtub21icmVXYWxsZXRGaWxlfWA7XHJcbn07XHJcblxyXG4vLyBTZSBwYXNhIGxhIHdhbGxldCBkZSBORU0gYSB1biBzdHJpbmcgdWUgbHVlZ28gcHVlZGUgc2VyIFwiYmFqYWRvXCIgYSBkaXNjb1xyXG5jb25zdCB3YWxsZXRTdHJpbmcgPSB0c3RXYWxsZXQud3JpdGVXTFRGaWxlKCk7XHJcblxyXG4vLyBMYSBzaWd1aWVudGUgbGluZWEgZXMgbGEgcXVlIFwiYmFqYSBhIGRpc2NvXCIgZWwgXCJzdHJpbmdcIiBkZSBsYSB3YWxsZXQgZGUgTkVNIGNyZWFkYVxyXG5mcy53cml0ZUZpbGVTeW5jKGZ1bGxGaWxlV2FsbGV0UGF0aCwgd2FsbGV0U3RyaW5nKTtcclxuY29uc29sZS5sb2coYFxcbj09Pj5MYSB3YWxsZXQgc2UgZ3VhcmRvIGV4aXRvc2FtZW50ZSBlbjogJHtmdWxsRmlsZVdhbGxldFBhdGh9XFxuYCk7XHJcblxyXG4vLyAvLyBFc2NyaWJpZW5kbyBlbCBhcmNoaXZvIGRlIGxhIHdhbGxldCwgcGVybyBlc3RhIHZleiBkZSBmb3JtYSBhc2luY3JvbmEuXHJcbi8vIGZzLndyaXRlRmlsZShgJHtmdWxsRmlsZVdhbGxldFBhdGh9YCwgd2FsbGV0U3RyaW5nLCAoZXJyKSA9PiB7XHJcbi8vICAgICAvLyBTaSBsYSBlc2NyaXR1cmEgZGUgbGEgd2FsbGV0IGRhIGVycm9yLCBzZSBjYXB0dXJhIGVsIGVycm9yXHJcbi8vICAgICBpZiAoZXJyKSB0aHJvdyBlcnI7XHJcbi8vXHJcbi8vICAgICAvLyBzaSB2YSB0b2RvIGJpZW4sIHNlIGRhIHVuIG1lbnNhamUgZGUgZXhpdG9cclxuLy8gICAgIGNvbnNvbGUubG9nKGBcXG49PT4+TGEgd2FsbGV0IHNlIGd1YXJkbyBleGl0b3NhbWVudGUgZW46ICR7cnV0YVdhbGxldH0ke25vbWJyZVdhbGxldEZpbGV9XFxuYClcclxuLy8gfSk7XHJcbiovXHJcblxyXG4vKlxyXG4vLyBRdWludG8gRWplbXBsb1xyXG4vLyBMZXllbmRvIHVuYSB3YWxsZXQgZGVzZGUgZWwgZGlzY29cclxuXHJcblxyXG4vLyBMZXllbmRvIGVsIGFyY2hpdm8gZGUgbGEgd2FsbGV0Li4uXHJcbmNvbnNvbGUubG9nKCdDYXJnYW5kbyBlbCBjb250ZW5pZG8gZGVsIGFyY2hpdm8gKGVuIGNydWRvKSBkZSBsYSB3YWxsZXQgZW4gdW5hIHZhcmlhYmxlXFxuJyk7XHJcbmNvbnN0IHRtcFN0ck1pV2FsbGV0ID0gZnMucmVhZEZpbGVTeW5jKGAke2Z1bGxGaWxlV2FsbGV0UGF0aH1gLCAndXRmOCcpO1xyXG5jb25zb2xlLmxvZygnXFxuRWwgYXJjaGl2byBcInB1cm9cIiBkZSBsYSB3YWxsZXQgY29udGllbmU6XFxuJyk7XHJcbmNvbnNvbGUubG9nKHRtcFN0ck1pV2FsbGV0KTtcclxuY29uc29sZS5sb2coJ1xcbicpO1xyXG5cclxuXHJcbi8vIFNpIGxhIHdhbGxldCBhIGxlZXIgZnVlIGNyZWFkYSBkZSBtYW5lcmEgc2VuY2lsbGEsIGVzIGRlY2lyLCBzaW4gdXNhciBsYSBcIk5hbm8gV2FsbGV0XCIuXHJcbmNvbnN0IG1pV2FsbGV0ID0gU2ltcGxlV2FsbGV0LnJlYWRGcm9tV0xUKHRtcFN0ck1pV2FsbGV0KTtcclxuXHJcbi8vIFNpIGxhIHdhbGxldCBhIGxlZXIgZnVlIGNyZWFkYSBjb24gbGEgXCJOYW5vIFdhbGxsZXRcIlxyXG4vL2NvbnN0IG1pV2FsbGV0ID0gU2ltcGxlV2FsbGV0LnJlYWRGcm9tTmFub1dhbGxldFdMRih0bXBTdHJNaVdhbGxldCk7XHJcblxyXG5jb25zb2xlLmxvZygnXFxuRWwgY29udGVuaWRvIGRlIGxhIHdhbGxldCBzZWd1biBORU0gZXM6XFxuJyk7XHJcbmNvbnNvbGUubG9nKG1pV2FsbGV0KTtcclxuY29uc29sZS5sb2coJ1xcbicpO1xyXG5cclxuY29uc29sZS5sb2coJ1xcbkFicmllbmRvIGxhIHdhbGxldCBwYXJhIHZlciBsYSBpbmZvcm1hY2lvbiBkZXRhbGxhZGEgZGUgbGEgbWlzbWE6XFxuJyk7XHJcbmNvbnN0IG1pQ3VlbnRhID0gbWlXYWxsZXQub3BlbihtaVdhbGxldFBhc3MpO1xyXG5jb25zb2xlLmxvZygnXFxuTGEgaW5mb3JtYWNpb24gZGUgbGEgY3VlbnRhIGNvbnRlbmlkYSBlbiBsYSB3YWxsZXQgZXM6XFxuJyk7XHJcbmNvbnNvbGUubG9nKG1pQ3VlbnRhKTtcclxuY29uc29sZS5sb2coJ1xcbicpO1xyXG5cclxuXHJcbi8vIEV4dHJhZSBsYSBhZGRyZXNzIG8gZGlyZWNjaW9uIGRlIGxhIHdhbGxldC5cclxuLy8gTGEgYWRkcmVzcyBzZSBwdWVkZSBleHRyYWVyIGRlIGxhIG1pc21hIHdhbGxldCBvIGRlIGxhIGN1ZW50YVxyXG5jb25zdCBteUFkZHJlc3MgPSBtaVdhbGxldC5hZGRyZXNzO1xyXG5jb25zb2xlLmxvZygnTGEgYWRkcmVzcyBvIGRpcmVjY2lvbiBkZSBsYSBjdWVudGEgY29udGVuaWRhIGVuIGxhIHdhbGxldCBlczpcXG4nKTtcclxuY29uc29sZS5sb2cobXlBZGRyZXNzLnByZXR0eSgpKTtcclxuY29uc29sZS5sb2coJ1xcbicpO1xyXG4qL1xyXG5cclxuLypcclxuLy8gU2V4dG8gRWplbXBsb1xyXG4vLyBFbnZpYXIgWEVNICh0cmFuc2FjY2lvbmVzIGNvbiBYRU0pXHJcbiovXHJcbi8vIHN3aXRjaCB0byBub2RlIG5pc3Rlc3Qub3BlbmluZy1saW5lLmpwLiBJdCB1c2VzIGRpZmZlcmVudCBjb25maWd1cmF0aW9uIHNvIHNob3VsZCBhbGxvdyB3cm9uZyB0aW1lc3RhbXAuXHJcbi8vIGNoYW5nZSB5b3VyIGxvY2FsIHRpbWUgLTMwc2VjXHJcbi8vIENyZWEgdW5hIHRyYW5zYWNjaW9uIGNvbiBzdXMgZGF0b3MuXHJcbmNvbnN0IHRyYW5zZmVyVHJhbnNhY3Rpb24gPSBUcmFuc2ZlclRyYW5zYWN0aW9uLmNyZWF0ZShcclxuICAgIFRpbWVXaW5kb3cuY3JlYXRlV2l0aERlYWRsaW5lKCksXHJcbiAgICBuZXcgQWRkcmVzcyhcIlRBU0VCUkUzT1lLWkRDNVhLQVFMQUlYWElMTExIQlFSTlNGUk1TSlBcIiksXHJcbiAgICBuZXcgWEVNKDEpLFxyXG4gICAgUGxhaW5NZXNzYWdlLmNyZWF0ZShcIlByb2dyYW1hbmRvIGNvbiBORU0gQmxvY2tjaGFpbiBlbiBTYW50aWFnbyEhIVwiKVxyXG4pO1xyXG5cclxuLy8gQ3JlYSB1bmEgY29uZXhpb24gSFRUUCBwYXJhIGVudmlhciBsYSB0cnggbHVlZ29cclxuLy8gRW4gZXN0ZSBjYXNvIHNlIGNvbmZpZ3VyYSB1biBOT0RPIE5FTSBwYXJhIHNhbGlyIGVzcGVjaWZpY2FtZW50ZSBwb3IgZXN0ZSBub2RvIHkgbm8gcG9yIGVsIHByaW1lcm8gcXVlIHNlIGVuY3VlbnRyZVxyXG5sZXQgTm9kb05FTSA9IDxTZXJ2ZXJDb25maWc+e3Byb3RvY29sOiAnaHR0cHMnLCBkb21haW46ICduaXN0ZXN0Lm9wZW5pbmctbGluZS5qcCcsIHBvcnQ6IDc4OTF9O1xyXG5jb25zdCB0cmFuc2FjdGlvbkh0dHAgPSBuZXcgVHJhbnNhY3Rpb25IdHRwKFtOb2RvTkVNXSk7XHJcblxyXG4vLyBTZSBndWFyZGEgZW4gdW5hIHZhcmlhYmxlIHRlbXBvcmFsIGxhIGNsYXZlIHByaXZhZGEgZGUgcXVpZW4gZW52aWFcclxuLy8gTG8gaW50ZXJlc2FudGUgc2VyaWEgYWJyaXIgbGEgd2FsbGV0LCBzYWNhciBsYSBkYXRhIHkgY29uIGVzdGEgZGF0YSBmaXJtYXIgbGEgdHJhbnNhY2Npb24uXHJcbi8vY29uc3QgcHJpdmF0ZUtleTogc3RyaW5nID0gcHJvY2Vzcy5lbnYuUFJJVkFURV9LRVk7XHJcbmNvbnN0IHByaXZhdGVLZXk6IHN0cmluZyA9IFwiYzRjNDA1MDRmZGVkMDI4ODQ1NWIyZGJiMDJhZDQ3ZmZiYTBkYmFiMzFhODgyMjUxMzkxYTQ1NDkwNTg1N2I5Y1wiO1xyXG5cclxuLy8gQ3JlYSB1bmEgY3VlbnRhIGNvbiBsYSBjbGF2ZSBwcml2YWRhLlxyXG5jb25zdCBhY2NvdW50ID0gQWNjb3VudC5jcmVhdGVXaXRoUHJpdmF0ZUtleShwcml2YXRlS2V5KTtcclxuXHJcbmNvbnN0IHNpZ25lZFRyYW5zYWN0aW9uID0gYWNjb3VudC5zaWduVHJhbnNhY3Rpb24odHJhbnNmZXJUcmFuc2FjdGlvbik7XHJcblxyXG5jb25zb2xlLmxvZyhzaWduZWRUcmFuc2FjdGlvbik7XHJcblxyXG50cmFuc2FjdGlvbkh0dHAuYW5ub3VuY2VUcmFuc2FjdGlvbihzaWduZWRUcmFuc2FjdGlvbikuc3Vic2NyaWJlKHggPT4ge1xyXG4gIGNvbnNvbGUubG9nKHgpXHJcbn0pO1xyXG5cclxuXHJcbi8vIENyZWEgdW5hIHRyYW5zYWNjaW9uIHkgbGEgZW52aWEuLi5cclxuXHJcbi8vIGZ1bmN0aW9uIGRlbGF5KG1zKSB7XHJcbi8vICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUpIHtcclxuLy8gICAgIHNldFRpbWVvdXQocmVzb2x2ZSwgbXMpO1xyXG4vLyAgIH0pO1xyXG4vLyB9XHJcbi8vXHJcbi8vIGFzeW5jIGZ1bmN0aW9uIGFzeW5jQXdhaXQoKSB7XHJcbi8vICAgY29uc29sZS5sb2coXCJLbm9jaywga25vY2shXCIpO1xyXG4vLyAgIGF3YWl0IGRlbGF5KDEwMDAwMCk7XHJcbi8vIH1cclxuLy8gYXN5bmNBd2FpdCgpO1xyXG5cclxuXHJcblxyXG5cclxuLy8gTGV5ZW5kbyBlbCBhcmNoaXZvIGRlIGxhIHdhbGxldC4uLlxyXG4vLyBjb25zb2xlLmxvZygnQ2FyZ2FuZG8gZWwgY29udGVuaWRvIGRlbCBhcmNoaXZvIChlbiBjcnVkbykgZGUgbGEgd2FsbGV0IGVuIHVuYSB2YXJpYWJsZVxcbicpO1xyXG4vLyBjb25zdCB0bXBTdHJNaVdhbGxldCA9IGZzLnJlYWRGaWxlU3luYyhgJHtmdWxsRmlsZVdhbGxldFBhdGh9YCwgJ3V0ZjgnKTtcclxuLy8gY29uc3QgbWlXYWxsZXQgPSBTaW1wbGVXYWxsZXQucmVhZEZyb21XTFQodG1wU3RyTWlXYWxsZXQpO1xyXG4vLyBjb25zdCBteUFkZHJlc3MgPSBtaVdhbGxldC5hZGRyZXNzO1xyXG4vLyBjb25zb2xlLmxvZygnTGEgYWRkcmVzcyBvIGRpcmVjY2lvbiBkZSBsYSBjdWVudGEgY29udGVuaWRhIGVuIGxhIHdhbGxldCBlczpcXG4nKTtcclxuLy8gY29uc29sZS5sb2cobXlBZGRyZXNzLnByZXR0eSgpKTtcclxuXHJcbi8qXHJcbi8vIFNlcHRpbW8gRWplbXBsb1xyXG4vLyBSZXZpc2FyIGJhbGFuY2VzXHJcblxyXG5cclxuLy8gUmV2aXNhciBiYWxhbmNlIGRlIFhFTVxyXG4vLyBSZXZpc2FyIGJsYW5jZXMgZGUgTU9TQUlDc1xyXG5cclxuY29uc3QgbXlBY2NvdW50ID0gbmV3IEFjY291bnRIdHRwKCk7XHJcbm15QWNjb3VudC5nZXRNb3NhaWNPd25lZEJ5QWRkcmVzcyhteUFkZHJlc3MpLnN1YnNjcmliZShtb3NhaWNzID0+IHtcclxuICBjb25zdCB4ZW1Nb3NhaWMgPSBtb3NhaWNzLmZpbmQoKG1vc2FpYykgPT4ge1xyXG5cdFx0cmV0dXJuIG1vc2FpYy5tb3NhaWNJZC5uYW1lID09PSAneGVtJztcclxuXHR9KTtcclxuXHRpZiAoIXhlbU1vc2FpYykge1xyXG4gICAgY29uc29sZS5sb2coJ0xhIGNhbnRpZGFkIFhFTSBlczogMCcpO1xyXG4gIH0gZWxzZSB7XHJcblx0ICAgY29uc29sZS5sb2coYExhIGNhbnRpZGFkIFhFTSBlczogJHt4ZW1Nb3NhaWMucXVhbnRpdHkgLyAxZTZ9YCk7XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgZG9jdGFNb3NhaWMgPSBtb3NhaWNzLmZpbmQoKG1vc2FpYykgPT4ge1xyXG4gICAgcmV0dXJuIG1vc2FpYy5tb3NhaWNJZC5uYW1lID09PSAnZG9jdGF0c3QnO1xyXG4gIH0pO1xyXG4gIGlmICghZG9jdGFNb3NhaWMpIHtcclxuICAgIGNvbnNvbGUubG9nKCdMYSBjYW50aWRhZCBkb2N0YXRzdCBlczogMCcpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICAgY29uc29sZS5sb2coYExhIGNhbnRpZGFkIGRvY3RhdHN0IGVzOiAke2RvY3RhTW9zYWljLnF1YW50aXR5IC8gMWU2fWApO1xyXG4gIH07XHJcbn0pO1xyXG5cclxuLy8vLyBMYSBjYW50aWRhZCBYRU0gZXM6IDEwMS4yNVxyXG4vLy8vIExhIGNhbnRpZGFkIGRvY3RhdHN0IGVzOiAxMjM0NTY3XHJcbiovXHJcblxyXG4vKlxyXG4vLyBPY3Rhdm8gRWplbXBsb1xyXG4vLyBIYWNlciB0cmFuc2FjY2lvbmVzIGNvbiBtb3NhaWNvc1xyXG4qL1xyXG5cclxuLy8gRGV2IEFjY291bnRcclxuLy8gQWNjb3VudCB7XHJcbi8vICAgYWRkcmVzczogQWRkcmVzcyB7XHJcbi8vICAgICB2YWx1ZTogJ1RDR09JRVBLU0xUWDZUMkVOTVVZVDQzSDJaSE1FQ0hFNkNQV0RRNk4nLFxyXG4vLyAgICAgbmV0d29ya1R5cGU6IDE1MlxyXG4vLyAgIH0sXHJcbi8vICAgcHVibGljS2V5OiAnOTUwYzhjOTkzMDlkNjI0ODFkMjdlZTY3MzYxMmQyZjljNjY5NmI1OTYyMTM4NGZhN2Y0NjFmMTc2ZmZmYjU5ZCcsXHJcbi8vICAgcHJpdmF0ZUtleTogJ2M0YzQwNTA0ZmRlZDAyODg0NTViMmRiYjAyYWQ0N2ZmYmEwZGJhYjMxYTg4MjI1MTM5MWE0NTQ5MDU4NTdiOWMnXHJcbi8vIH1cclxuLy9cclxuLy8gVEFTRUJSRTNPWUtaREM1WEtBUUxBSVhYSUxMTEhCUVJOU0ZSTVNKUCA9PT4+IEVzdGEgZXMgbWkgbmFub3dhbGxldCBEb2N0YVxyXG4vL1xyXG5cclxuXHJcbi8vIGNvbnNvbGUubG9nKCdBIHZlciBzaSBzZSBwdWVkZSBvYnRlbmVyIHVuIG1vc2FpY28gdHJhbnNmZXJpYmxlLi4uJyk7XHJcbi8vIGNvbnN0IHBpcGkgPSBuZXcgTW9zYWljSWQoJ2RvY3RhX3Rlc3QnLCAnZG9jdGF0c3QnKTtcclxuLy8gY29uc3QgY2FjYSA9IG5ldyBNb3NhaWNIdHRwKCk7XHJcbi8vXHJcbi8vIC8vIEJ1c2NvIHVuIG1vc2FpY28geSBsbyBkZXZ1ZWx2byBlbiBtb2RvIHRyYW5zZmVyYWJsZSBwYXJhIHBvZGVyIGx1ZWdvIGFkanVudGFybG8gZW4gdW5hIHRyYW5zYWNjaW9uXHJcbi8vIGNhY2EuZ2V0TW9zYWljVHJhbnNmZXJhYmxlV2l0aEFic29sdXRlQW1vdW50KHBpcGksIDEpLnN1YnNjcmliZSggbW10cmFuc2ZlcmFibGUgPT4gIHtcclxuLy8gICAgIGNvbnNvbGUubG9nKGBBbGdvLi4uOiAke21tdHJhbnNmZXJhYmxlLnByb3BlcnRpZXMuZGl2aXNpYmlsaXR5LnRvU3RyaW5nKCl9YCk7XHJcbi8vIH0pO1xyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcbi8vIEZ1bmNpb24gcGFyYSBidXNjYXIgdW4gbW9zYWljbyBlbiB1bmEgd2FsbGV0LlxyXG4vLyBjb25zdCBzZWFyY2hNb3NhaWMgPSAoYWRkcmVzczogQWRkcmVzcyk6IFByb21pc2U8TW9zYWljPiA9PiB7XHJcbi8vIFx0cmV0dXJuIG5ldyBQcm9taXNlPE1vc2FpYz4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4vLyBcdFx0Y29uc29sZS5sb2coYEJ1c2NhbmRvIG1vc2FpY28gZW4gbGEgZGlyZWNjaW9uOiAke2FkZHJlc3MucHJldHR5KCl9YCk7XHJcbi8vXHJcbi8vICAgICBjb25zdCBteUFjY291bnQgPSBuZXcgQWNjb3VudEh0dHAoKTtcclxuLy8gICAgIG15QWNjb3VudC5nZXRNb3NhaWNPd25lZEJ5QWRkcmVzcyhhZGRyZXNzKS5zdWJzY3JpYmUobW9zYWljcyA9PiB7XHJcbi8vICAgICAgIHRyeXtcclxuLy8gICAgICAgICByZXNvbHZlKG1vc2FpY3MuZmluZCgobW9zYWljKSA9PiB7XHJcbi8vICAgICAgICAgICByZXR1cm4gbW9zYWljLm1vc2FpY0lkLm5hbWUgPT09ICdkb2N0YXRzdCc7XHJcbi8vICAgICAgICAgfSkpO1xyXG4vLyAgICAgICB9IGNhdGNoKGVycikge1xyXG4vLyAgICAgICAgIGNvbnNvbGUubG9nKGAke2Vycn1gKTtcclxuLy8gICAgIFx0XHRcdGNvbnNvbGUubG9nKCdQbGVhc2UgdHJ5IGFnYWluJyk7XHJcbi8vICAgICBcdFx0XHRyZWplY3QoKTtcclxuLy8gICAgICAgfTtcclxuLy8gICAgIH0pO1xyXG4vLyBcdH0pO1xyXG4vLyB9O1xyXG4vL1xyXG4vLyAvLyBGdW5jaW9uIHBhcmEgaW1wcmltaXIgbGEgaW5mb3JtYWNpb24gZGUgdW4gbW9zYWljby5cclxuLy8gY29uc3QgaW1wcmltZU1vc2FpY28gPSBhc3luYyAoKSA9PiB7XHJcbi8vICAgY29uc3QgcHAgPSBhd2FpdCBzZWFyY2hNb3NhaWMobXlBZGRyZXNzKTtcclxuLy8gICBjb25zb2xlLmxvZygnSG9sYSB4eXonKTtcclxuLy8gICBjb25zb2xlLmxvZyhgRWwgbW9zYWljbyBlbmNvbnRyYWRvIGVzOiAke3BwLm1vc2FpY0lkLm5hbWV9YCk7XHJcbi8vXHJcbi8vIH07XHJcblxyXG4vL2NvbnN0IHNlbGVjdGVkTW9zYWljID0gbmV3IE1vc2FpY1RyYW5zZmVyYWJsZSgpO1xyXG5cclxuLy8gaW1wcmltZU1vc2FpY28oKTtcclxuXHJcblxyXG4vLyBQcm9iYXIgTkVNUGF5IGJhamFybGFcclxuXHJcbi8vIFJldmlzYXIgY29tbyBoYWNlIGxhIHRyYW5zYWNjaW9uIGVuIGh0dHBzOi8vZ2l0aHViLmNvbS9kZ2FyY2lhMzYwL05FTVBheS9ibG9iL21hc3Rlci9zcmMvcGFnZXMvdHJhbnNmZXIvdHJhbnNmZXIudHNcclxuIl19